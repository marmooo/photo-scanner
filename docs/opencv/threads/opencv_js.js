var isPthread,isNode,cv=(()=>{var e=globalThis.document?.currentScript?.src;return async function(t={}){var Lt,J,Rt,Le,Re,oe,Ue,ie,K,mt,dt,nn,it,g,U,le,de,ue,P,pe,kt,on,zt,cn,Ee,r,v,w,O,H,Qe,Js,nt,Qs,ot,at,ft,Mt,Wt,S,Q,ln,je,f,dn,st,Xt,ct,ce,V,ye,_e,Ut,d,C,Qt,Ae,Ys,Me,Tt,$s,Ft,Ne,ge,i,Ot,Bs,yt,jt,Fs,We,Cs,k,lt,us,rs,ss,tt,$n,he,M,D,$,re,Bn,ae,j,In,X,Hn,l,m,q,bt,Rn,Ln,Nn,Ie,Pe,et,En,Et,G,se,wn,_n,yn,ne,Dt,Se,ke,jn,bn,pn,te,xe,Kt,sn,tn,en,Z,As,Gt,p,qt,T,an,ee,Ce,hn,mn,fn,Ht,gn,vn,Pt,F,De,_,St,On,xn,Cn,Ct,kn,An,Sn,Mn,Fn,Tn,zn,Dn,_t,R,Ve,gt,ht,N,rt,Vn,xt,Wn,Un,Kn,qn,Yn,Gn,Xn,Qn,Zn,Jn,es,ts,ns,Ze,me,is,fe,cs,ls,ds,Ge,hs,ms,fs,ps,ut,vs,bs,js,ys,_s,ws,Os,xs,pt,Es,ks,Zt,Ss,Ms,vt,zs,Ds,wt,Ls,Rs,Ps,Hs,Is,He,Vs,u,I,qs,Nt,L,ve,be,Zs,A,Je,c,no,Be,oo,At,ao,ro,Fe,lo,n,Y,fo,vo,jo,yo,_o,wo,Oo,xo,Co,we,It,E,$o,$t,Eo,ho,uo,Bt,co,io,Ns,Ts,gs,Io,Pn,un,a,B,Yt,s=t,Jt=!!globalThis.window,z=!!globalThis.WorkerGlobalScope,b=globalThis.process?.versions?.node&&globalThis.process?.type!="renderer",h=z&&self.name?.startsWith("em-pthread");b&&(J=require("worker_threads"),global.Worker=J.Worker,z=!J.isMainThread,h=z&&J.workerData=="em-pthread"),Rt=[],Le="./this.program",Re=(e,t)=>{throw t},typeof __filename!="undefined"?e=__filename:z&&(e=self.location.href),oe="";function Jo(e){return s.locateFile?s.locateFile(e,oe):oe+e}if(b)K=require("fs"),oe=__dirname+"/",ie=e=>{e=pe(e)?new URL(e):e;var t=K.readFileSync(e);return t},Ue=async(e,t=!0)=>{e=pe(e)?new URL(e):e;var n=K.readFileSync(e,t?void 0:"utf8");return n},process.argv.length>1&&(Le=process.argv[1].replace(/\\/g,"/")),Rt=process.argv.slice(2),Re=(e,t)=>{throw process.exitCode=e,t};else if(Jt||z){try{oe=new URL(".",e).href}catch{}b||(z&&(ie=e=>{var t=new XMLHttpRequest;return t.open("GET",e,!1),t.responseType="arraybuffer",t.send(null),new Uint8Array(t.response)}),Ue=async e=>{if(pe(e))return new Promise((t,n)=>{var s=new XMLHttpRequest;s.open("GET",e,!0),s.responseType="arraybuffer",s.onload=()=>{if(s.status==200||s.status==0&&s.response){t(s.response);return}n(s.status)},s.onerror=n,s.send(null)});var t=await fetch(e,{credentials:"same-origin"});if(t.ok)return t.arrayBuffer();throw new Error(t.status+" : "+t.url)})}mt=console.log.bind(console),dt=console.error.bind(console),b&&(nn=require("util"),it=e=>typeof e=="object"?nn.inspect(e):e,mt=(...e)=>K.writeSync(1,e.map(it).join(" ")+`
`),dt=(...e)=>K.writeSync(2,e.map(it).join(" ")+`
`)),U=mt,g=dt,ue=!1,pe=e=>e.startsWith("file://");function o(){k.buffer!=v.buffer&&Ke()}if(b&&h&&(zt=J.parentPort,zt.on("message",e=>global.onmessage?.({data:e})),Object.assign(globalThis,{self:global,postMessage:e=>zt.postMessage(e)}),process.on("uncaughtException",e=>{postMessage({cmd:"uncaughtException",error:e}),process.exit(1)})),h){Ee=!1,self.onunhandledrejection=e=>{throw e.reason||e};function Vt(e){try{var t=e.data,n=t.cmd;if(n==="load"){let e=[];self.onmessage=t=>e.push(t),cn=()=>{postMessage({cmd:"loaded"});for(let t of e)Vt(t);self.onmessage=Vt};for(const e of t.handlers)(!s[e]||s[e].proxy)&&(s[e]=(...t)=>{postMessage({cmd:"callHandler",handler:e,args:t})},e=="print"&&(U=s[e]),e=="printErr"&&(g=s[e]));k=t.wasmMemory,Ke(),de=t.wasmModule,to(),Xe()}else if(n==="run"){Ro(t.pthread_ptr),$t(t.pthread_ptr,0,0,1,0,0),d.threadInitTLS(),Ze(t.pthread_ptr),Ee||(Co(),Ee=!0);try{Fs(t.start_routine,t.arg)}catch(e){if(e!="unwind")throw e}}else t.target==="setimmediate"||(n==="checkMailbox"?Ee&&me():n&&(g(`worker: received unknown command ${n}`),g(t)))}catch(e){throw Eo(),e}}self.onmessage=Vt}st=!1;function Ke(){var e=k.buffer;v=new Int8Array(e),Q=new Int16Array(e),w=new Uint8Array(e),H=new Uint16Array(e),O=new Int32Array(e),r=new Uint32Array(e),ln=new Float32Array(e),je=new Float64Array(e),f=new BigInt64Array(e),dn=new BigUint64Array(e)}function Do(){if(h)return;if(s.wasmMemory)k=s.wasmMemory;else{var e=s.INITIAL_MEMORY||134217728;k=new WebAssembly.Memory({initial:e/65536,maximum:16384,shared:!0})}Ke()}function So(){if(s.preRun)for(typeof s.preRun=="function"&&(s.preRun=[s.preRun]);s.preRun.length;)Wt(s.preRun.shift());ft(Mt)}function ko(){if(st=!0,h)return cn();!s.noFSInit&&!n.initialized&&n.init(),A.init(),B.ea(),n.ignorePermissions=!1}function si(){if(h)return;if(s.postRun)for(typeof s.postRun=="function"&&(s.postRun=[s.postRun]);s.postRun.length;)Bs(s.postRun.shift());ft(Ot)}function y(e){s.onAbort?.(e),e="Aborted("+e+")",g(e),ue=!0,e+=". Build with -sASSERTIONS for more info.";var t=new WebAssembly.RuntimeError(e);throw on?.(t),t}function Fo(){return Jo("opencv_js.wasm")}function To(e){if(e==Xt&&le)return new Uint8Array(le);if(ie)return ie(e);throw"both async and sync fetching of the wasm failed"}async function zo(e){if(!le)try{var t=await Ue(e);return new Uint8Array(t)}catch{}return To(e)}async function No(e,t){try{var s=await zo(e),n=await WebAssembly.instantiate(s,t);return n}catch(e){g(`failed to asynchronously prepare wasm: ${e}`),y(e)}}async function Lo(e,t,n){if(!e&&!pe(t)&&!b)try{var o=fetch(t,{credentials:"same-origin"}),s=await WebAssembly.instantiateStreaming(o,n);return s}catch(e){g(`wasm streaming compile failed: ${e}`),g("falling back to ArrayBuffer instantiation")}return No(t,n)}function so(){Wo();var e={a:un};return e}async function to(){function e(e,t){return B=e.exports,Cs(B.la),Ao(B),de=t,B}function a(t){return e(t.instance,t.module)}var n,o,i,t=so();return s.instantiateWasm?new Promise((n)=>{s.instantiateWasm(t,(t,s)=>{n(e(t,s))})}):h?(n=new WebAssembly.Instance(de,so()),e(n,de)):(Xt??=Fo(),o=await Lo(le,Xt,t),i=a(o),i)}ct=e=>{if(e instanceof eo||e=="unwind")return P;Re(1,e)};class eo{name="ExitStatus";constructor(e){this.message=`Program terminated with exit(${e})`,this.status=e}}ce=0,Qe=()=>We||ce>0,Js=()=>gs(),nt=e=>Ns(e),Qs=e=>Ts(e),ot=e=>{e.terminate(),e.onmessage=e=>{}},at=e=>{var t=d.pthreads[e];d.returnWorkerToPool(t)},ft=e=>{for(;e.length>0;)e.shift()(s)},Mt=[],Wt=e=>Mt.push(e),S=0,V=null,ye=e=>{if(S--,s.monitorRunDependencies?.(S),S==0&&V){var t=V;V=null,t()}},_e=e=>{S++,s.monitorRunDependencies?.(S)},Ut=e=>{var n,t=d.getNewWorker();return t?(d.runningWorkers.push(t),d.pthreads[e.pthread_ptr]=t,t.pthread_ptr=e.pthread_ptr,n={cmd:"run",start_routine:e.startRoutine,arg:e.arg,pthread_ptr:e.pthread_ptr},b&&t.unref(),t.postMessage(n,e.transferList),0):6},d={unusedWorkers:[],runningWorkers:[],tlsInitFunctions:[],pthreads:{},init(){h||d.initMainThread()},initMainThread(){for(var e=4;e--;)d.allocateUnusedWorker();Wt(async()=>{var e=d.loadWasmModuleToAllWorkers();_e("loading-workers"),await e,ye("loading-workers")})},terminateAllThreads:()=>{for(var e of d.runningWorkers)ot(e);for(var e of d.unusedWorkers)ot(e);d.unusedWorkers=[],d.runningWorkers=[],d.pthreads={}},returnWorkerToPool:e=>{var t=e.pthread_ptr;delete d.pthreads[t],d.unusedWorkers.push(e),d.runningWorkers.splice(d.runningWorkers.indexOf(e),1),e.pthread_ptr=0,uo(t)},threadInitTLS(){d.tlsInitFunctions.forEach(e=>e())},loadWasmModuleToWorker:e=>new Promise(t=>{e.onmessage=n=>{var a,o=n.data,i=o.cmd;if(o.targetThread&&o.targetThread!=we()){a=d.pthreads[o.targetThread],a?a.postMessage(o,o.transferList):g(`Internal error! Worker sent a message "${i}" to target pthread ${o.targetThread}, but that thread no longer exists!`);return}i==="checkMailbox"?me():i==="spawnThread"?Ut(o):i==="cleanupThread"?Me(()=>at(o.thread)):i==="loaded"?(e.loaded=!0,b&&!e.pthread_ptr&&e.unref(),t(e)):o.target==="setimmediate"?e.postMessage(o):i==="uncaughtException"?e.onerror(o.error):i==="callHandler"?s[o.handler](...o.args):i&&g(`worker sent an unknown command ${i}`)},e.onerror=e=>{var t="worker sent an error!";throw g(`${t} ${e.filename}:${e.lineno}: ${e.message}`),e},b&&(e.on("message",t=>e.onmessage({data:t})),e.on("error",t=>e.onerror(t)));var o,n=[],i=["onExit","onAbort","print","printErr"];for(o of i)s.propertyIsEnumerable(o)&&n.push(o);e.postMessage({cmd:"load",handlers:n,wasmMemory:k,wasmModule:de})}),async loadWasmModuleToAllWorkers(){if(h)return;let e=Promise.all(d.unusedWorkers.map(d.loadWasmModuleToWorker));return e},allocateUnusedWorker(){var n,t=e;s.mainScriptUrlOrBlob&&(t=s.mainScriptUrlOrBlob,typeof t!="string"&&(t=URL.createObjectURL(t))),n=new Worker(t,{workerData:"em-pthread",name:"em-pthread"}),d.unusedWorkers.push(n)},getNewWorker(){return d.unusedWorkers.length==0&&(d.allocateUnusedWorker(),d.loadWasmModuleToWorker(d.unusedWorkers[0])),d.unusedWorkers.pop()}},C=(e,t,n,...s)=>{for(var r,d,c=s.length*2,u=Js(),l=Qs(c*8),a=l>>3,i=0;i<s.length;i++)r=s[i],typeof r=="bigint"?((o(),f)[a+2*i]=1n,(o(),f)[a+2*i+1]=r):((o(),f)[a+2*i]=0n,(o(),je)[a+2*i+1]=r);return d=ho(e,t,c,l,n),nt(u),d};function Xs(e){if(h)return C(0,0,1,e);P=e,Qe()||(d.terminateAllThreads(),s.onExit?.(e),ue=!0),Re(e,new eo(e))}function Gs(e){if(h)return C(1,0,0,e);Ae(e)}Qt=(e)=>{if(P=e,h)throw Gs(e),"unwind";Xs(e)},Ae=Qt,Ys=()=>{if(!Qe())try{if(h){we()&&Bt(P);return}Ae(P)}catch(e){ct(e)}},Me=e=>{if(ue)return;try{e(),Ys()}catch(e){ct(e)}};function Ks(){return document.fullscreenElement||document.mozFullScreenElement||document.webkitFullscreenElement||document.webkitCurrentFullScreenElement||document.msFullscreenElement}Tt=()=>{ce+=1},$s=()=>{ce-=1},Ft=(e,t)=>(Tt(),setTimeout(()=>{$s(),Me(e)},t)),Ne=e=>{Ne.shown||={},Ne.shown[e]||(Ne.shown[e]=1,b&&(e="warning: "+e),g(e))},ge=[],i={useWebGL:!1,isFullscreen:!1,pointerLock:!1,moduleContextCreatedCallbacks:[],workers:[],preloadedImages:{},preloadedAudios:{},getCanvas:()=>s.canvas,init(){if(i.initted)return;i.initted=!0;var e,n,t={};t.canHandle=function(t){return!s.noImageDecoding&&/\.(jpg|jpeg|png|bmp|webp)$/i.test(t)},t.handle=async function(t,n){var s,o=new Blob([t],{type:i.getMimetype(n)});return o.size!==t.length&&(o=new Blob([new Uint8Array(t).buffer],{type:i.getMimetype(n)})),s=URL.createObjectURL(o),new Promise((e,o)=>{var a=new Image;a.onload=()=>{var r,o=document.createElement("canvas");o.width=a.width,o.height=a.height,r=o.getContext("2d"),r.drawImage(a,0,0),i.preloadedImages[n]=o,URL.revokeObjectURL(s),e(t)},a.onerror=e=>{g(`Image ${s} could not be decoded`),o()},a.src=s})},ge.push(t),e={},e.canHandle=function(t){return!s.noAudioDecoding&&t.slice(-4)in{".ogg":1,".wav":1,".mp3":1}},e.handle=async function(t,n){return new Promise((e)=>{var o,c,l,a=!1;function r(s){if(a)return;a=!0,i.preloadedAudios[n]=s,e(t)}c=new Blob([t],{type:i.getMimetype(n)}),l=URL.createObjectURL(c),o=new Audio,o.addEventListener("canplaythrough",()=>r(o),!1),o.onerror=function(){if(a)return;g(`warning: browser could not fully decode audio ${n}, trying slower base64 approach`);function i(e){for(var r,o="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/",i="=",t="",s=0,n=0,a=0;a<e.length;a++)for(s=s<<8|e[a],n+=8;n>=6;)r=s>>n-6&63,n-=6,t+=o[r];return n==2?(t+=o[(s&3)<<4],t+=i+i):n==4&&(t+=o[(s&15)<<2],t+=i),t}o.src="data:audio/x-"+n.slice(-3)+";base64,"+i(t),r(o)},o.src=l,Ft(()=>{r(o)},1e4)})},ge.push(e);function o(){var e=i.getCanvas();i.pointerLock=document.pointerLockElement===e}n=i.getCanvas(),n&&(document.addEventListener("pointerlockchange",o,!1),s.elementPointerLock&&n.addEventListener("click",e=>{!i.pointerLock&&i.getCanvas().requestPointerLock&&(i.getCanvas().requestPointerLock(),e.preventDefault())},!1))},createContext(e,t,n,o){if(t&&s.ctx&&e==i.getCanvas())return s.ctx;if(t){var a,r,l,c={antialias:!1,alpha:!1,majorVersion:1};if(o)for(l in o)c[l]=o[l];typeof GL!="undefined"&&(r=GL.createContext(e,c),r&&(a=GL.getContext(r).GLctx))}else a=e.getContext("2d");return a?(n&&(s.ctx=a,t&&GL.makeContextCurrent(r),i.useWebGL=t,i.moduleContextCreatedCallbacks.forEach(e=>e()),i.init()),a):null},fullscreenHandlersInstalled:!1,lockPointer:void 0,resizeCanvas:void 0,requestFullscreen(e,t){i.lockPointer=e,i.resizeCanvas=t,typeof i.lockPointer=="undefined"&&(i.lockPointer=!0),typeof i.resizeCanvas=="undefined"&&(i.resizeCanvas=!1);var n,o=i.getCanvas();function a(){i.isFullscreen=!1;var e=o.parentNode;Ks()===e?(o.exitFullscreen=i.exitFullscreen,i.lockPointer&&o.requestPointerLock(),i.isFullscreen=!0,i.resizeCanvas?i.setFullscreenCanvasSize():i.updateCanvasDimensions(o)):(e.parentNode.insertBefore(o,e),e.parentNode.removeChild(e),i.resizeCanvas?i.setWindowedCanvasSize():i.updateCanvasDimensions(o)),s.onFullScreen?.(i.isFullscreen),s.onFullscreen?.(i.isFullscreen)}i.fullscreenHandlersInstalled||(i.fullscreenHandlersInstalled=!0,document.addEventListener("fullscreenchange",a,!1),document.addEventListener("mozfullscreenchange",a,!1),document.addEventListener("webkitfullscreenchange",a,!1),document.addEventListener("MSFullscreenChange",a,!1)),n=document.createElement("div"),o.parentNode.insertBefore(n,o),n.appendChild(o),n.requestFullscreen=n.requestFullscreen||n.mozRequestFullScreen||n.msRequestFullscreen||(n.webkitRequestFullscreen?()=>n.webkitRequestFullscreen(Element.ALLOW_KEYBOARD_INPUT):null)||(n.webkitRequestFullScreen?()=>n.webkitRequestFullScreen(Element.ALLOW_KEYBOARD_INPUT):null),n.requestFullscreen()},exitFullscreen(){if(!i.isFullscreen)return!1;var e=document.exitFullscreen||document.cancelFullScreen||document.mozCancelFullScreen||document.msExitFullscreen||document.webkitCancelFullScreen||(()=>{});return e.apply(document,[]),!0},safeSetTimeout(e,t){return Ft(e,t)},getMimetype(e){return{jpg:"image/jpeg",jpeg:"image/jpeg",png:"image/png",bmp:"image/bmp",ogg:"audio/ogg",wav:"audio/wav",mp3:"audio/mpeg"}[e.slice(e.lastIndexOf(".")+1)]},getUserMedia(e){window.getUserMedia||=navigator.getUserMedia||navigator.mozGetUserMedia,window.getUserMedia(e)},getMovementX(e){return e.movementX||e.mozMovementX||e.webkitMovementX||0},getMovementY(e){return e.movementY||e.mozMovementY||e.webkitMovementY||0},getMouseWheelDelta(e){var t=0;switch(e.type){case"DOMMouseScroll":t=e.detail/3;break;case"mousewheel":t=e.wheelDelta/120;break;case"wheel":switch(t=e.deltaY,e.deltaMode){case 0:t/=100;break;case 1:t/=3;break;case 2:t*=80;break;default:y("unrecognized mouse wheel delta mode: "+e.deltaMode)}break;default:y("unrecognized mouse wheel event: "+e.type)}return t},mouseX:0,mouseY:0,mouseMovementX:0,mouseMovementY:0,touches:{},lastTouches:{},calculateMouseCoords(e,t){var s=i.getCanvas(),n=s.getBoundingClientRect(),r=typeof window.scrollX!="undefined"?window.scrollX:window.pageXOffset,c=typeof window.scrollY!="undefined"?window.scrollY:window.pageYOffset,o=e-(r+n.left),a=t-(c+n.top),o=o*(s.width/n.width),a=a*(s.height/n.height);return{x:o,y:a}},setMouseCoords(e,t){const{x:n,y:s}=i.calculateMouseCoords(e,t);i.mouseMovementX=n-i.mouseX,i.mouseMovementY=s-i.mouseY,i.mouseX=n,i.mouseY=s},calculateMouseEvent(e){if(i.pointerLock)e.type!="mousemove"&&"mozMovementX"in e?i.mouseMovementX=i.mouseMovementY=0:(i.mouseMovementX=i.getMovementX(e),i.mouseMovementY=i.getMovementY(e)),i.mouseX+=i.mouseMovementX,i.mouseY+=i.mouseMovementY;else{if(e.type==="touchstart"||e.type==="touchend"||e.type==="touchmove"){var n,s,t=e.touch;if(t===void 0)return;n=i.calculateMouseCoords(t.pageX,t.pageY),e.type==="touchstart"?(i.lastTouches[t.identifier]=n,i.touches[t.identifier]=n):(e.type==="touchend"||e.type==="touchmove")&&(s=i.touches[t.identifier],s||=n,i.lastTouches[t.identifier]=s,i.touches[t.identifier]=n);return}i.setMouseCoords(e.pageX,e.pageY)}},resizeListeners:[],updateResizeListeners(){var e=i.getCanvas();i.resizeListeners.forEach(t=>t(e.width,e.height))},setCanvasSize(e,t,n){var s=i.getCanvas();i.updateCanvasDimensions(s,e,t),n||i.updateResizeListeners()},windowedWidth:0,windowedHeight:0,setFullscreenCanvasSize(){if(typeof SDL!="undefined"){var e=(o(),r)[SDL.screen>>2],e=e|8388608;(o(),O)[SDL.screen>>2]=e}i.updateCanvasDimensions(i.getCanvas()),i.updateResizeListeners()},setWindowedCanvasSize(){if(typeof SDL!="undefined"){var e=(o(),r)[SDL.screen>>2],e=e&~8388608;(o(),O)[SDL.screen>>2]=e}i.updateCanvasDimensions(i.getCanvas()),i.updateResizeListeners()},updateCanvasDimensions(e,t,n){t&&n?(e.widthNative=t,e.heightNative=n):(t=e.widthNative,n=e.heightNative);var r,o=t,a=n;s.forcedAspectRatio>0&&(o/a<s.forcedAspectRatio?o=Math.round(a*s.forcedAspectRatio):a=Math.round(o/s.forcedAspectRatio)),Ks()===e.parentNode&&typeof screen!="undefined"&&(r=Math.min(screen.width/o,screen.height/a),o=Math.round(o*r),a=Math.round(a*r)),i.resizeCanvas?(e.width!=o&&(e.width=o),e.height!=a&&(e.height=a),typeof e.style!="undefined"&&(e.style.removeProperty("width"),e.style.removeProperty("height"))):(e.width!=t&&(e.width=t),e.height!=n&&(e.height=n),typeof e.style!="undefined"&&(o!=t||a!=n?(e.style.setProperty("width",o+"px","important"),e.style.setProperty("height",a+"px","important")):(e.style.removeProperty("width"),e.style.removeProperty("height"))))}},Ot=[],Bs=e=>Ot.push(e);function Ro(e){var t=(o(),r)[e+52>>2],n=(o(),r)[e+56>>2],s=t-n;io(t,s),nt(t)}yt=[],jt=e=>{var t=yt[e];return t||(yt[e]=t=Pn.get(e)),t},Fs=(e,t)=>{ce=0,We=0;var n=jt(e)(t);function s(e){if(Qe()){P=e;return}Bt(e)}s(n)},We=!0,Cs=e=>d.tlsInitFunctions.push(e);class Ho{constructor(e){this.excPtr=e,this.ptr=e-24}set_type(e){(o(),r)[this.ptr+4>>2]=e}get_type(){return(o(),r)[this.ptr+4>>2]}set_destructor(e){(o(),r)[this.ptr+8>>2]=e}get_destructor(){return(o(),r)[this.ptr+8>>2]}set_caught(e){e=e?1:0,(o(),v)[this.ptr+12]=e}get_caught(){return(o(),v)[this.ptr+12]!=0}set_rethrown(e){e=e?1:0,(o(),v)[this.ptr+13]=e}get_rethrown(){return(o(),v)[this.ptr+13]!=0}init(e,t){this.set_adjusted_ptr(0),this.set_type(e),this.set_destructor(t)}set_adjusted_ptr(e){(o(),r)[this.ptr+16>>2]=e}get_adjusted_ptr(){return(o(),r)[this.ptr+16>>2]}}lt=0,us=0,rs=(e,t,n)=>{var s=new Ho(e);throw s.init(t,n),lt=e,us++,lt};function os(e,t,n,s){return h?C(2,0,1,e,t,n,s):tt(e,t,n,s)}ss=()=>!!globalThis.SharedArrayBuffer,tt=(e,t,n,s)=>{if(!ss())return 6;var o,i=[],a=0;return h&&(i.length===0||a)?os(e,t,n,s):a||(o={startRoutine:n,pthread_ptr:e,arg:s,transferList:i},h?(o.cmd="spawnThread",postMessage(o,i),0):Ut(o))},$n=()=>y(""),he={},$=e=>{for(;e.length;){var n=e.pop(),t=e.pop();t(n)}};function W(e){return this.fromWireType((o(),r)[e>>2])}D={},M={},re={},Bn=class InternalError extends Error{constructor(e){super(e),this.name="InternalError"}},ae=e=>{throw new Bn(e)},j=(e,t,n)=>{e.forEach(e=>re[e]=t);function i(t){var s,o=n(t);o.length!==e.length&&ae("Mismatched type converter count");for(s=0;s<e.length;++s)x(e[s],o[s])}var s=new Array(t.length),o=[],a=0;for(let[n,e]of t.entries())M.hasOwnProperty(e)?s[n]=M[e]:(o.push(e),D.hasOwnProperty(e)||(D[e]=[]),D[e].push(()=>{s[n]=M[e],++a,a===o.length&&i(s)}));0===o.length&&i(s)},In=e=>{var t,n,o,i,a,s=he[e];delete he[e],t=s.elements,n=t.length,i=t.map(e=>e.getterReturnType).concat(t.map(e=>e.setterArgumentType)),a=s.rawConstructor,o=s.rawDestructor,j([e],i,e=>{for(const[o,s]of t.entries()){const i=e[o],a=s.getter,r=s.getterContext,c=e[o+n],l=s.setter,d=s.setterContext;s.read=e=>i.fromWireType(a(r,e)),s.write=(e,t)=>{var n=[];l(d,e,c.toWireType(n,t)),$(n)}}return[{name:s.name,fromWireType:e=>{for(var i=new Array(n),s=0;s<n;++s)i[s]=t[s].read(e);return o(e),i},toWireType:(e,i)=>{if(n!==i.length)throw new TypeError(`Incorrect number of tuple elements for ${s.name}: expected=${n}, actual=${i.length}`);for(var c=a(),r=0;r<n;++r)t[r].write(c,i[r]);return e!==null&&e.push(o,c),c},readValueFromPointer:W,destructorFunction:o}]})},X={},Hn=e=>{var t,s,o,i,n=X[e];delete X[e],o=n.rawConstructor,s=n.rawDestructor,t=n.fields,i=t.map(e=>e.getterReturnType).concat(t.map(e=>e.setterArgumentType)),j([e],i,e=>{var a,r,i={};for([r,a]of t.entries()){const n=e[r],s=a.getter,o=a.getterContext,c=e[r+t.length],l=a.setter,d=a.setterContext;i[a.fieldName]={read:e=>n.fromWireType(s(o,e)),write:(e,t)=>{var n=[];l(d,e,c.toWireType(n,t)),$(n)},optional:n.optional}}return[{name:n.name,fromWireType:e=>{var n,t={};for(n in i)t[n]=i[n].read(e);return s(e),t},toWireType:(e,t)=>{for(n in i)if(!(n in t)&&!i[n].optional)throw new TypeError(`Missing field: "${n}"`);var n,a=o();for(n in i)i[n].write(a,t[n]);return e!==null&&e.push(s,a),a},readValueFromPointer:W,destructorFunction:s}]})},m=e=>{for(var t,n="";1;){if(t=(o(),w)[e++],!t)return n;n+=String.fromCharCode(t)}},q=class BindingError extends Error{constructor(e){super(e),this.name="BindingError"}},l=e=>{throw new q(e)};function Bo(e,t,n={}){var o,s=t.name;if(e||l(`type "${s}" must have a positive integer typeid pointer`),M.hasOwnProperty(e)){if(n.ignoreDuplicateRegistrations)return;l(`Cannot register type '${s}' twice`)}M[e]=t,delete re[e],D.hasOwnProperty(e)&&(o=D[e],delete D[e],o.forEach(e=>e()))}function x(e,t,n={}){return Bo(e,t,n)}bt=(e,t,n)=>{switch(t){case 1:return n?e=>(o(),v)[e]:e=>(o(),w)[e];case 2:return n?e=>(o(),Q)[e>>1]:e=>(o(),H)[e>>1];case 4:return n?e=>(o(),O)[e>>2]:e=>(o(),r)[e>>2];case 8:return n?e=>(o(),f)[e>>3]:e=>(o(),dn)[e>>3];default:throw new TypeError(`invalid integer width (${t}): ${e}`)}},Rn=(e,t,n,s,o)=>{t=m(t);const a=s===0n;let i=e=>e;if(a){const e=n*8;i=t=>BigInt.asUintN(e,t),o=i(o)}x(e,{name:t,fromWireType:i,toWireType:(e,t)=>(typeof t=="number"&&(t=BigInt(t)),t),readValueFromPointer:bt(t,n,!a),destructorFunction:null})},Ln=(e,t,n,s)=>{t=m(t),x(e,{name:t,fromWireType:function(e){return!!e},toWireType:function(e,t){return t?n:s},readValueFromPointer:function(e){return this.fromWireType((o(),w)[e])},destructorFunction:null})},Nn=e=>({count:e.count,deleteScheduled:e.deleteScheduled,preservePointerOnDelete:e.preservePointerOnDelete,ptr:e.ptr,ptrType:e.ptrType,smartPtr:e.smartPtr,smartPtrType:e.smartPtrType}),Ie=e=>{function t(e){return e.$$.ptrType.registeredClass.name}l(t(e)+" instance already deleted")},Pe=!1,et=e=>{},En=e=>{e.smartPtr?e.smartPtrType.rawDestructor(e.smartPtr):e.ptrType.registeredClass.rawDestructor(e.ptr)},Et=e=>{e.count.value-=1;var t=0===e.count.value;t&&En(e)},G=e=>globalThis.FinalizationRegistry?(Pe=new FinalizationRegistry(e=>{Et(e.$$)}),G=e=>{var n,t=e.$$,s=!!t.smartPtr;return s&&(n={$$:t},Pe.register(e,n,e)),e},et=e=>Pe.unregister(e),G(e)):(G=e=>e,e),se=[],wn=()=>{for(;se.length;){var e=se.pop();e.$$.deleteScheduled=!1,e.delete()}},yn=()=>{let e=Te.prototype;Object.assign(e,{isAliasOf(e){if(!(this instanceof Te))return!1;if(!(e instanceof Te))return!1;var t,s,n=this.$$.ptrType.registeredClass,o=this.$$.ptr;for(e.$$=e.$$,t=e.$$.ptrType.registeredClass,s=e.$$.ptr;n.baseClass;)o=n.upcast(o),n=n.baseClass;for(;t.baseClass;)s=t.upcast(s),t=t.baseClass;return n===t&&o===s},clone(){if(this.$$.ptr||Ie(this),this.$$.preservePointerOnDelete)return this.$$.count.value+=1,this;var e=G(Object.create(Object.getPrototypeOf(this),{$$:{value:Nn(this.$$)}}));return e.$$.count.value+=1,e.$$.deleteScheduled=!1,e},delete(){this.$$.ptr||Ie(this),this.$$.deleteScheduled&&!this.$$.preservePointerOnDelete&&l("Object already scheduled for deletion"),et(this),Et(this.$$),this.$$.preservePointerOnDelete||(this.$$.smartPtr=void 0,this.$$.ptr=void 0)},isDeleted(){return!this.$$.ptr},deleteLater(){return this.$$.ptr||Ie(this),this.$$.deleteScheduled&&!this.$$.preservePointerOnDelete&&l("Object already scheduled for deletion"),se.push(this),se.length===1&&_n&&_n(wn),this.$$.deleteScheduled=!0,this}});const t=Symbol.dispose;t&&(e[t]=e.delete)};function Te(){}ne=(e,t)=>Object.defineProperty(t,"name",{value:e}),Dt={},Se=(e,t,n)=>{if(void 0===e[t].overloadTable){var s=e[t];e[t]=function(...s){return e[t].overloadTable.hasOwnProperty(s.length)||l(`Function '${n}' called with an invalid number of arguments (${s.length}) - expects one of (${e[t].overloadTable})!`),e[t].overloadTable[s.length].apply(this,s)},e[t].overloadTable=[],e[t].overloadTable[s.argCount]=s}},ke=(e,t,n)=>{s.hasOwnProperty(e)?((void 0===n||void 0!==s[e].overloadTable&&void 0!==s[e].overloadTable[n])&&l(`Cannot register public name '${e}' twice`),Se(s,e,e),s[e].overloadTable.hasOwnProperty(n)&&l(`Cannot register multiple overloads of a function with the same number of arguments (${n})!`),s[e].overloadTable[n]=t):(s[e]=t,s[e].argCount=n)},jn=48,bn=57,pn=e=>{e=e.replace(/[^a-zA-Z0-9_]/g,"$");var t=e.charCodeAt(0);return t>=jn&&t<=bn?`_${e}`:e};function Mo(e,t,n,s,o,i,a,r){this.name=e,this.constructor=t,this.instancePrototype=n,this.rawDestructor=s,this.baseClass=o,this.getActualType=i,this.upcast=a,this.downcast=r,this.pureVirtualFunctions=[]}te=(e,t,n)=>{for(;t!==n;)t.upcast||l(`Expected null or instance of ${n.name}, got an instance of ${t.name}`),e=t.upcast(e),t=t.baseClass;return e},xe=e=>{if(e===null)return"null";var t=typeof e;return t==="object"||t==="array"||t==="function"?e.toString():""+e};function Uo(e,t){if(t===null)return this.isReference&&l(`null is not a valid ${this.name}`),0;t.$$||l(`Cannot pass "${xe(t)}" as a ${this.name}`),t.$$.ptr||l(`Cannot pass deleted object as a pointer of type ${this.name}`);var n=t.$$.ptrType.registeredClass,s=te(t.$$.ptr,n,this.registeredClass);return s}function Ko(e,t){if(t===null)return this.isReference&&l(`null is not a valid ${this.name}`),this.isSmartPointer?(n=this.rawConstructor(),e!==null&&e.push(this.rawDestructor,n),n):0;(!t||!t.$$)&&l(`Cannot pass "${xe(t)}" as a ${this.name}`),t.$$.ptr||l(`Cannot pass deleted object as a pointer of type ${this.name}`),!this.isConst&&t.$$.ptrType.isConst&&l(`Cannot convert argument of type ${t.$$.smartPtrType?t.$$.smartPtrType.name:t.$$.ptrType.name} to parameter type ${this.name}`);var s,o=t.$$.ptrType.registeredClass,n=te(t.$$.ptr,o,this.registeredClass);if(this.isSmartPointer)switch(void 0===t.$$.smartPtr&&l("Passing raw pointer to smart pointer is illegal"),this.sharingPolicy){case 0:t.$$.smartPtrType===this?n=t.$$.smartPtr:l(`Cannot convert argument of type ${t.$$.smartPtrType?t.$$.smartPtrType.name:t.$$.ptrType.name} to parameter type ${this.name}`);break;case 1:n=t.$$.smartPtr;break;case 2:t.$$.smartPtrType===this?n=t.$$.smartPtr:(s=t.clone(),n=this.rawShare(n,_.toHandle(()=>s.delete())),e!==null&&e.push(this.rawDestructor,n));break;default:l("Unsupporting sharing policy")}return n}function Go(e,t){if(t===null)return this.isReference&&l(`null is not a valid ${this.name}`),0;t.$$||l(`Cannot pass "${xe(t)}" as a ${this.name}`),t.$$.ptr||l(`Cannot pass deleted object as a pointer of type ${this.name}`),t.$$.ptrType.isConst&&l(`Cannot convert argument of type ${t.$$.ptrType.name} to parameter type ${this.name}`);var n=t.$$.ptrType.registeredClass,s=te(t.$$.ptr,n,this.registeredClass);return s}Kt=(e,t,n)=>{if(t===n)return e;if(void 0===n.baseClass)return null;var s=Kt(e,t,n.baseClass);return s===null?null:n.downcast(s)},sn={},tn=(e,t)=>{for(t===void 0&&l("ptr should not be undefined");e.baseClass;)t=e.upcast(t),e=e.baseClass;return t},en=(e,t)=>(t=tn(e,t),sn[t]),Z=(e,t)=>{(!t.ptrType||!t.ptr)&&ae("makeClassHandle requires ptr and ptrType");var n=!!t.smartPtrType,s=!!t.smartPtr;return n!==s&&ae("Both smartPtrType and smartPtr must be specified"),t.count={value:1},G(Object.create(e,{$$:{value:t,writable:!0}}))};function Vo(e){var t,n,o,i,a,c,s=this.getPointee(e);if(!s)return this.destructor(e),null;if(t=en(this.registeredClass,s),void 0!==t)return 0===t.$$.count.value?(t.$$.ptr=s,t.$$.smartPtr=e,t.clone()):(a=t.clone(),this.destructor(e),a);function r(){return this.isSmartPointer?Z(this.registeredClass.instancePrototype,{ptrType:this.pointeeType,ptr:s,smartPtrType:this,smartPtr:e}):Z(this.registeredClass.instancePrototype,{ptrType:this,ptr:e})}return c=this.registeredClass.getActualType(s),o=Dt[c],o?(this.isConst?n=o.constPointerType:n=o.pointerType,i=Kt(s,this.registeredClass,n.registeredClass),i===null?r.call(this):this.isSmartPointer?Z(n.registeredClass.instancePrototype,{ptrType:n,ptr:i,smartPtrType:this,smartPtr:e}):Z(n.registeredClass.instancePrototype,{ptrType:n,ptr:i})):r.call(this)}As=()=>{Object.assign(qe.prototype,{getPointee(e){return this.rawGetPointee&&(e=this.rawGetPointee(e)),e},destructor(e){this.rawDestructor?.(e)},readValueFromPointer:W,fromWireType:Vo})};function qe(e,t,n,s,o,i,a,r,c,l,d){this.name=e,this.registeredClass=t,this.isReference=n,this.isConst=s,this.isSmartPointer=o,this.pointeeType=i,this.sharingPolicy=a,this.rawGetPointee=r,this.rawConstructor=c,this.rawShare=l,this.rawDestructor=d,!o&&t.baseClass===void 0?s?(this.toWireType=Uo,this.destructorFunction=null):(this.toWireType=Go,this.destructorFunction=null):this.toWireType=Ko}Gt=(e,t,n)=>{s.hasOwnProperty(e)||ae("Replacing nonexistent public symbol"),void 0!==s[e].overloadTable&&void 0!==n?s[e].overloadTable[n]=t:(s[e]=t,s[e].argCount=n)},p=(e,t)=>{e=m(e);function o(){var e=jt(t);return e}var s=o();return typeof s!="function"&&l(`unknown function pointer with signature ${e}: ${t}`),s};class Zo extends Error{}qt=e=>{var t=xo(e),n=m(t);return E(t),n},T=(e,t)=>{var n=[],s={};function o(e){if(s[e])return;if(M[e])return;if(re[e]){re[e].forEach(o);return}n.push(e),s[e]=!0}throw t.forEach(o),new Zo(`${e}: `+n.map(qt).join([", "]))},an=(e,t,n,s,o,i,a,r,c,l,d,u,h)=>{d=m(d),i=p(o,i),r&&=p(a,r),l&&=p(c,l),h=p(u,h);var f=pn(d);ke(f,function(){T(`Cannot construct ${d} due to unbound types`,[s])}),j([e,t,n],s?[s]:[],t=>{t=t[0],s?(a=t.registeredClass,c=a.instancePrototype):c=Te.prototype;var n,a,c,m,p,g,o=ne(d,function(...e){if(Object.getPrototypeOf(this)!==u)throw new q(`Use 'new' to construct ${d}`);if(void 0===n.constructor_body)throw new q(`${d} has no accessible constructor`);var t=n.constructor_body[e.length];if(void 0===t)throw new q(`Tried to invoke ctor of ${d} with invalid number of parameters (${e.length}) - expected (${Object.keys(n.constructor_body).toString()}) parameters instead!`);return t.apply(this,e)}),u=Object.create(c,{constructor:{value:o}});return o.prototype=u,n=new Mo(d,o,u,h,a,i,r,l),n.baseClass&&(n.baseClass.__derivedClasses??=[],n.baseClass.__derivedClasses.push(n)),g=new qe(d,n,!0,!1,!1),m=new qe(d+"*",n,!1,!1,!1),p=new qe(d+" const*",n,!1,!0,!1),Dt[e]={pointerType:m,constPointerType:p},Gt(f,o),[g,m,p]})};function rn(e){for(var t=1;t<e.length;++t)if(e[t]!==null&&e[t].destructorFunction===void 0)return!0;return!1}function qo(e,t,n,s){var o,i,c,l,u,h,d=rn(e),m=e.length-2,r=[],a=["fn"];t&&a.push("thisWired");for(o=0;o<m;++o)r.push(`arg${o}`),a.push(`arg${o}Wired`);r=r.join(","),a=a.join(","),i=`return function (${r}) {
`,d&&(i+=`var destructors = [];
`),u=d?"destructors":"null",c=["humanName","throwBindingError","invoker","fn","runDestructors","fromRetWire","toClassParamWire"],t&&(i+=`var thisWired = toClassParamWire(${u}, this);
`);for(o=0;o<m;++o)h=`toArg${o}Wire`,i+=`var arg${o}Wired = ${h}(${u}, arg${o});
`,c.push(h);if(i+=(n||s?"var rv = ":"")+`invoker(${a});
`,d)i+=`runDestructors(destructors);
`;else for(o=t?1:2;o<e.length;++o)l=o===1?"thisWired":"arg"+(o-2)+"Wired",e[o].destructorFunction!==null&&(i+=`${l}_dtor(${l});
`,c.push(`${l}_dtor`));return n&&(i+=`var ret = fromRetWire(rv);
return ret;
`),i+=`}
`,new Function(c,i)}function Oe(e,t,n,s,o,i){var a,r,c,d,u,h,f,p,g,m=t.length;m<2&&l("argTypes array size mismatch! Must at least get return value and 'this' types!");for(c=t[1]!==null&&n!==null,f=rn(t),p=!t[0].isVoid,d=t[0],u=t[1],r=[e,l,s,o,$,d.fromWireType.bind(d),u?.toWireType.bind(u)],a=2;a<m;++a)h=t[a],r.push(h.toWireType.bind(h));if(!f)for(a=c?1:2;a<t.length;++a)t[a].destructorFunction!==null&&r.push(t[a].destructorFunction);let v=qo(t,c,p,i);return g=v(...r),ne(e,g)}ee=(e,t)=>{for(var s=[],n=0;n<e;n++)s.push((o(),r)[t+n*4>>2]);return s},Ce=e=>{e=e.trim();const t=e.indexOf("(");return t===-1?e:e.slice(0,t)},hn=(e,t,n,s,o,i,a,r)=>{var l=ee(n,s);t=m(t),t=Ce(t),i=p(o,i,r),j([],[e],e=>{e=e[0];var s,o=`${e.name}.${t}`;function c(){T(`Cannot call ${o} due to unbound types`,l)}return t.startsWith("@@")&&(t=Symbol[t.substring(2)]),s=e.registeredClass.constructor,void 0===s[t]?(c.argCount=n-1,s[t]=c):(Se(s,t,o),s[t].overloadTable[n-1]=c),j([],l,c=>{var d=[c[0],null].concat(c.slice(1)),l=Oe(o,d,null,i,a,r);if(void 0===s[t].overloadTable?(l.argCount=n-1,s[t]=l):s[t].overloadTable[n-1]=l,e.registeredClass.__derivedClasses)for(const n of e.registeredClass.__derivedClasses)n.constructor.hasOwnProperty(t)||(n.constructor[t]=l);return[]}),[]})},mn=(e,t,n,s,o,i)=>{var a=ee(t,n);o=p(s,o),j([],[e],e=>{e=e[0];var n=`constructor ${e.name}`;if(void 0===e.registeredClass.constructor_body&&(e.registeredClass.constructor_body=[]),void 0!==e.registeredClass.constructor_body[t-1])throw new q(`Cannot register multiple constructors with identical number of parameters (${t-1}) for class '${e.name}'! Overload resolution is currently only performed using the parameter count, not actual type info!`);return e.registeredClass.constructor_body[t-1]=()=>{T(`Cannot construct ${e.name} due to unbound types`,a)},j([],a,s=>(s.splice(1,0,null),e.registeredClass.constructor_body[t-1]=Oe(n,s,null,o,i),[])),[]})},fn=(e,t,n,s,o,i,a,r,c)=>{var d=ee(n,s);t=m(t),t=Ce(t),i=p(o,i,c),j([],[e],e=>{e=e[0];var s,o,u=`${e.name}.${t}`;t.startsWith("@@")&&(t=Symbol[t.substring(2)]),r&&e.registeredClass.pureVirtualFunctions.push(t);function l(){T(`Cannot call ${u} due to unbound types`,d)}return s=e.registeredClass.instancePrototype,o=s[t],void 0===o||void 0===o.overloadTable&&o.className!==e.name&&o.argCount===n-2?(l.argCount=n-2,l.className=e.name,s[t]=l):(Se(s,t,u),s[t].overloadTable[n-2]=l),j([],d,o=>{var r=Oe(u,o,e,i,a,c);return void 0===s[t].overloadTable?(r.argCount=n-2,s[t]=r):s[t].overloadTable[n-2]=r,[]}),[]})},Ht=(e,t,n)=>(e instanceof Object||l(`${n} with invalid "this": ${e}`),e instanceof t.registeredClass.constructor||l(`${n} incompatible with "this" of type ${e.constructor.name}`),e.$$.ptr||l(`cannot call emscripten binding method ${n} on deleted object`),te(e.$$.ptr,e.$$.ptrType.registeredClass,t.registeredClass)),gn=(e,t,n,s,o,i,a,r,c,d)=>{t=m(t),o=p(s,o),j([],[e],e=>{e=e[0];var s=`${e.name}.${t}`,u={get(){T(`Cannot access ${s} due to unbound types`,[n,a])},enumerable:!0,configurable:!0};return c?u.set=()=>T(`Cannot access ${s} due to unbound types`,[n,a]):u.set=e=>l(s+" is a read-only property"),Object.defineProperty(e.registeredClass.instancePrototype,t,u),j([],c?[n,a]:[n],n=>{var l,u=n[0],a={get(){var t=Ht(this,e,s+" getter");return u.fromWireType(o(i,t))},enumerable:!0};return c&&(c=p(r,c),l=n[1],a.set=function(t){var o=Ht(this,e,s+" setter"),n=[];c(d,o,l.toWireType(n,t)),$(n)}),Object.defineProperty(e.registeredClass.instancePrototype,t,a),[]}),[]})},vn=(e,t,n)=>{e=m(e),j([],[t],t=>(t=t[0],s[e]=t.fromWireType(n),[]))},Pt=[],F=[0,1,,1,null,1,!0,1,!1,1],De=e=>{e>9&&0===--F[e+1]&&(F[e]=void 0,Pt.push(e))},_={toValue:e=>(e||l(`Cannot use deleted val. handle = ${e}`),F[e]),toHandle:e=>{switch(e){case void 0:return 2;case null:return 4;case!0:return 6;case!1:return 8;default:{const t=Pt.pop()||F.length;return F[t]=e,F[t+1]=1,t}}}},St={name:"emscripten::val",fromWireType:e=>{var t=_.toValue(e);return De(e),t},toWireType:(e,t)=>_.toHandle(t),readValueFromPointer:W,destructorFunction:null},On=e=>x(e,St),xn=(e,t,n)=>{switch(t){case 1:return n?function(e){return this.fromWireType((o(),v)[e])}:function(e){return this.fromWireType((o(),w)[e])};case 2:return n?function(e){return this.fromWireType((o(),Q)[e>>1])}:function(e){return this.fromWireType((o(),H)[e>>1])};case 4:return n?function(e){return this.fromWireType((o(),O)[e>>2])}:function(e){return this.fromWireType((o(),r)[e>>2])};default:throw new TypeError(`invalid integer width (${t}): ${e}`)}},Cn=(e,t,n,s)=>{t=m(t);function o(){}o.values={},x(e,{name:t,constructor:o,fromWireType:function(e){return this.constructor.values[e]},toWireType:(e,t)=>t.value,readValueFromPointer:xn(t,n,s),destructorFunction:null}),ke(t,o)},Ct=(e,t)=>{var n=M[e];return void 0===n&&l(`${t} has unknown type ${qt(e)}`),n},kn=(e,t,n)=>{var o,i,s=Ct(e,"enum");t=m(t),o=s.constructor,i=Object.create(s.constructor.prototype,{value:{value:n},constructor:{value:ne(`${s.name}_${t}`,function(){})}}),o.values[n]=i,o[t]=i},An=(e,t)=>{switch(t){case 4:return function(e){return this.fromWireType((o(),ln)[e>>2])};case 8:return function(e){return this.fromWireType((o(),je)[e>>3])};default:throw new TypeError(`invalid float width (${t}): ${e}`)}},Sn=(e,t,n)=>{t=m(t),x(e,{name:t,fromWireType:e=>e,toWireType:(e,t)=>t,readValueFromPointer:An(t,n),destructorFunction:null})},Mn=(e,t,n,s,o,i,a)=>{var c=ee(t,n);e=m(e),e=Ce(e),o=p(s,o,a),ke(e,function(){T(`Cannot call ${e} due to unbound types`,c)},t-1),j([],c,n=>{var s=[n[0],null].concat(n.slice(1));return Gt(e,Oe(e,s,null,o,i,a),t-1),[]})},Fn=(e,t,n,s,o)=>{t=m(t);const r=s===0;let i=e=>e;if(r){var a=32-8*n;i=e=>e<<a>>>a,o=i(o)}x(e,{name:t,fromWireType:i,toWireType:(e,t)=>t,readValueFromPointer:bt(t,n,s!==0),destructorFunction:null})},Tn=(e,t,n)=>{var i=[Int8Array,Uint8Array,Int16Array,Uint16Array,Int32Array,Uint32Array,Float32Array,Float64Array,BigInt64Array,BigUint64Array],a=i[t];function s(e){var t=(o(),r)[e>>2],n=(o(),r)[e+4>>2];return new a((o(),v).buffer,n,t)}n=m(n),x(e,{name:n,fromWireType:s,readValueFromPointer:s},{ignoreDuplicateRegistrations:!0})},zn=Object.assign({optional:!0},St),Dn=(e)=>{x(e,zn)},_t=(e,t,n,s)=>{if(!(s>0))return 0;for(var o,r=n,i=n+s-1,a=0;a<e.length;++a)if(o=e.codePointAt(a),o<=127){if(n>=i)break;t[n++]=o}else if(o<=2047){if(n+1>=i)break;t[n++]=192|o>>6,t[n++]=128|o&63}else if(o<=65535){if(n+2>=i)break;t[n++]=224|o>>12,t[n++]=128|o>>6&63,t[n++]=128|o&63}else{if(n+3>=i)break;t[n++]=240|o>>18,t[n++]=128|o>>12&63,t[n++]=128|o>>6&63,t[n++]=128|o&63,a++}return t[n]=0,n-r},R=(e,t,n)=>_t(e,(o(),w),t,n),Ve=e=>{for(var n,t=0,s=0;s<e.length;++s)n=e.charCodeAt(s),n<=127?t++:n<=2047?t+=2:n>=55296&&n<=57343?(t+=4,++s):t+=3;return t},gt=globalThis.TextDecoder&&new TextDecoder,ht=(e,t,n,s)=>{var o=t+n;if(s)return o;for(;e[t]&&!(t>=o);)++t;return t},N=(e,t=0,n,s)=>{var o,i,r,c,l,a=ht(e,t,n,s);if(a-t>16&&e.buffer&&gt)return gt.decode(e.buffer instanceof ArrayBuffer?e.subarray(t,a):e.slice(t,a));for(i="";t<a;){if(o=e[t++],!(o&128)){i+=String.fromCharCode(o);continue}if(r=e[t++]&63,(o&224)==192){i+=String.fromCharCode((o&31)<<6|r);continue}c=e[t++]&63,(o&240)==224?o=(o&15)<<12|r<<6|c:o=(o&7)<<18|r<<12|c<<6|e[t++]&63,o<65536?i+=String.fromCharCode(o):(l=o-65536,i+=String.fromCharCode(55296|l>>10,56320|l&1023))}return i},rt=(e,t,n)=>e?N((o(),w),e,t,n):"",Vn=(e,t)=>{t=m(t);var n=!0;x(e,{name:t,fromWireType(e){var t,s,i=(o(),r)[e>>2],a=e+4;if(n)t=rt(a,i,!0);else{t="";for(s=0;s<i;++s)t+=String.fromCharCode((o(),w)[a+s])}return E(e),t},toWireType(e,t){t instanceof ArrayBuffer&&(t=new Uint8Array(t));var s,i,a,c,u,d=typeof t=="string";if(d||ArrayBuffer.isView(t)&&t.BYTES_PER_ELEMENT==1||l("Cannot pass non-string to std::string"),n&&d?s=Ve(t):s=t.length,i=It(4+s+1),c=i+4,(o(),r)[i>>2]=s,d)if(n)R(t,c,s+1);else for(a=0;a<s;++a)u=t.charCodeAt(a),u>255&&(E(i),l("String has UTF-16 code units that do not fit in 8 bits")),(o(),w)[c+a]=u;else(o(),w).set(t,c);return e!==null&&e.push(E,i),i},readValueFromPointer:W,destructorFunction(e){E(e)}})},xt=globalThis.TextDecoder?new TextDecoder("utf-16le"):void 0,Wn=(e,t,n)=>{var i,r,c,s=e>>1,a=ht((o(),H),s,t/2,n);if(a-s>16&&xt)return xt.decode((o(),H).slice(s,a));for(r="",i=s;i<a;++i)c=(o(),H)[i],r+=String.fromCharCode(c);return r},Un=(e,t,n)=>{if(n??=2147483647,n<2)return 0;n-=2;for(var i,a=t,r=n<e.length*2?n/2:e.length,s=0;s<r;++s)i=e.charCodeAt(s),(o(),Q)[t>>1]=i,t+=2;return(o(),Q)[t>>1]=0,t-a},Kn=e=>e.length*2,qn=(e,t,n)=>{for(var i,a="",c=e>>2,s=0;!(s>=t/4);s++){if(i=(o(),r)[c+s],!i&&!n)break;a+=String.fromCodePoint(i)}return a},Yn=(e,t,n)=>{if(n??=2147483647,n<4)return 0;for(var i,a=t,r=a+n-4,s=0;s<e.length;++s)if(i=e.codePointAt(s),i>65535&&s++,(o(),O)[t>>2]=i,t+=4,t+4>r)break;return(o(),O)[t>>2]=0,t-a},Gn=e=>{for(var s,n=0,t=0;t<e.length;++t)s=e.codePointAt(t),s>65535&&t++,n+=4;return n},Xn=(e,t,n)=>{n=m(n);var s,i,a;t===2?(s=Wn,i=Un,a=Kn):(s=qn,i=Yn,a=Gn),x(e,{name:n,fromWireType:e=>{var n=(o(),r)[e>>2],i=s(e+4,n*t,!0);return E(e),i},toWireType:(e,s)=>{typeof s=="string"||l(`Cannot pass non-string to C++ string type ${n}`);var d=a(s),c=It(4+d+t);return(o(),r)[c>>2]=d/t,i(s,c+4,d+t),e!==null&&e.push(E,c),c},readValueFromPointer:W,destructorFunction(e){E(e)}})},Qn=(e,t,n,s,o,i)=>{he[e]={name:m(t),rawConstructor:p(n,s),rawDestructor:p(o,i),elements:[]}},Zn=(e,t,n,s,o,i,a,r,c)=>{he[e].elements.push({getterReturnType:t,getter:p(n,s),getterContext:o,setterArgumentType:i,setter:p(a,r),setterContext:c})},Jn=(e,t,n,s,o,i)=>{X[e]={name:m(t),rawConstructor:p(n,s),rawDestructor:p(o,i),fields:[]}},es=(e,t,n,s,o,i,a,r,c,l)=>{X[e].fields.push({fieldName:m(t),getterReturnType:n,getter:p(s,o),getterContext:i,setterArgumentType:a,setter:p(r,c),setterContext:l})},ts=(e,t)=>{t=m(t),x(e,{isVoid:!0,name:t,fromWireType:()=>{},toWireType:()=>{}})},ns=e=>{$t(e,!z,1,!Jt,65536,!1),d.threadInitTLS()},Ze=e=>{if(Atomics.waitAsync){var t,n=Atomics.waitAsync((o(),O),e>>2,e);n.value.then(me),t=e+128,Atomics.store((o(),O),t>>2,1)}},me=()=>Me(()=>{var e=we();e&&(Ze(e),co())}),is=(e,t)=>{if(e==t)setTimeout(me);else if(h)postMessage({targetThread:e,cmd:"checkMailbox"});else{var n=d.pthreads[e];if(!n)return;n.postMessage({cmd:"checkMailbox"})}},fe=[],cs=(e,t,n,s,i)=>{s/=2,fe.length=s;for(var c,l,r=i>>3,a=0;a<s;a++)(o(),f)[r+2*a]?fe[a]=(o(),f)[r+2*a+1]:fe[a]=(o(),je)[r+2*a+1];return c=Oo[e],d.currentProxiedOperationCallerThread=n,l=c(...fe),d.currentProxiedOperationCallerThread=0,l},ls=e=>{h?postMessage({cmd:"cleanupThread",thread:e}):at(e)},ds=e=>{b&&d.pthreads[e].ref()},Ge=[],hs=e=>{var t=Ge.length;return Ge.push(e),t},ms=(e,t)=>{for(var s=new Array(e),n=0;n<e;++n)s[n]=Ct((o(),r)[t+n*4>>2],`parameter ${n}`);return s},fs=(e,t,n)=>{var s=[],i=e(s,n);return s.length&&((o(),r)[t>>2]=_.toHandle(s)),i},ps={},ut=e=>{var t=ps[e];return t===void 0?m(e):t},vs=(e,t,n)=>{var s,o,r,c,l,d=8,[i,...a]=ms(e,t),u=i.toWireType.bind(i),h=a.map(e=>e.readValueFromPointer.bind(e));switch(e--,o={toValue:_.toValue},r=h.map((e,t)=>{var n=`argFromPtr${t}`;return o[n]=e,`${n}(args${t?"+"+t*d:""})`}),n){case 0:s="toValue(handle)";break;case 2:s="new (toValue(handle))";break;case 3:s="";break;case 1:o.getStringOrSymbol=ut,s="toValue(handle)[getStringOrSymbol(methodName)]";break}return s+=`(${r})`,i.isVoid||(o.toReturnWire=u,o.emval_returnValue=fs,s=`return emval_returnValue(toReturnWire, destructorsRef, ${s})`),s=`return function (handle, methodName, destructorsRef, args) {
  ${s}
  }`,c=new Function(Object.keys(o),s)(...Object.values(o)),l=`methodCaller<(${a.map(e=>e.name)}) => ${i.name}>`,hs(ne(l,c))},bs=e=>{e>9&&(F[e+1]+=1)},js=(e,t,n,s,o)=>Ge[e](t,n,s,o),ys=()=>_.toHandle([]),_s=e=>_.toHandle(ut(e)),ws=e=>{var t=_.toValue(e);$(t),De(e)},Os=(e,t,n)=>{e=_.toValue(e),t=_.toValue(t),n=_.toValue(n),e[t]=n},xs=(e,t,n,s)=>{var c,l,d,u=(new Date).getFullYear(),h=new Date(u,0,1),m=new Date(u,6,1),i=h.getTimezoneOffset(),a=m.getTimezoneOffset(),f=Math.max(i,a);(o(),r)[e>>2]=f*60,(o(),O)[t>>2]=Number(i!=a),c=e=>{var n=e>=0?"-":"+",t=Math.abs(e),s=String(Math.floor(t/60)).padStart(2,"0"),o=String(t%60).padStart(2,"0");return`UTC${n}${s}${o}`},l=c(i),d=c(a),a<i?(R(l,n,17),R(d,s,17)):(R(l,s,17),R(d,n,17))},pt=()=>performance.timeOrigin+performance.now(),Es=()=>Date.now(),ks=1,Zt=e=>e>=0&&e<=3,Ss=9007199254740992,Ms=-9007199254740992,vt=e=>e<Ms||e>Ss?NaN:Number(e);function Po(e,t,n){if(t=vt(t),!Zt(e))return 28;if(e===0)s=Es();else if(ks)s=pt();else return 52;var s,i=Math.round(s*1e3*1e3);return(o(),f)[n>>3]=BigInt(i),0}zs=()=>{},Ds=()=>{throw Tt(),"unwind"},wt=()=>1073741824,Ls=()=>wt(),Rs=()=>b?require("os").cpus().length:navigator.hardwareConcurrency,Ps=(e,t)=>Math.ceil(e/t)*t,Hs=e=>{var t=k.buffer.byteLength,n=(e-t+65535)/65536|0;try{return k.grow(n),Ke(),1}catch{}},Is=e=>{var t,n,s,a,r,i=(o(),w).length;if(e>>>=0,e<=i)return!1;if(s=wt(),e>s)return!1;for(t=1;t<=4;t*=2)if(n=i*(1+.2/t),n=Math.min(n,e+100663296),a=Math.min(s,Ps(Math.max(e,n),65536)),r=Hs(a),r)return!0;return!1},He={},Vs=()=>Le||"./this.program",I=()=>{if(!I.strings){var e,n,s=(typeof navigator=="object"&&navigator.language||"C").replace("-","_")+".UTF-8",t={USER:"web_user",LOGNAME:"web_user",PATH:"/",PWD:"/",HOME:"/home/web_user",LANG:s,_:Vs()};for(e in He)He[e]===void 0?delete t[e]:t[e]=He[e];n=[];for(e in t)n.push(`${e}=${t[e]}`);I.strings=n}return I.strings};function Ws(e,t){if(h)return C(3,0,1,e,t);var n,a,s=0,i=0;for(a of I())n=t+s,(o(),r)[e+i>>2]=n,s+=R(a,n,1/0)+1,i+=4;return 0}function Us(e,t){if(h)return C(4,0,1,e,t);var n,i,s=I();(o(),r)[e>>2]=s.length,n=0;for(i of s)n+=Ve(i)+1;return(o(),r)[t>>2]=n,0}u={isAbs:e=>e.charAt(0)==="/",splitPath:e=>{var t=/^(\/?|)([\s\S]*?)((?:\.{1,2}|[^/]+?|)(\.[^./]*|))(?:[/]*)$/;return t.exec(e).slice(1)},normalizeArray:(e,t)=>{for(var o,s=0,n=e.length-1;n>=0;n--)o=e[n],o==="."?e.splice(n,1):o===".."?(e.splice(n,1),s++):s&&(e.splice(n,1),s--);if(t)for(;s;s--)e.unshift("..");return e},normalize:e=>{var t=u.isAbs(e),n=e.slice(-1)==="/";return e=u.normalizeArray(e.split("/").filter(e=>!!e),!t).join("/"),!e&&!t&&(e="."),e&&n&&(e+="/"),(t?"/":"")+e},dirname:e=>{var n=u.splitPath(e),s=n[0],t=n[1];return!s&&!t?".":(t&&(t=t.slice(0,-1)),s+t)},basename:e=>e&&e.match(/([^/]+|\/)\/*$/)[1],join:(...e)=>u.normalize(e.join("/")),join2:(e,t)=>u.normalize(e+"/"+t)},qs=()=>{if(b){var e=require("crypto");return t=>e.randomFillSync(t)}return e=>e.set(crypto.getRandomValues(new Uint8Array(e.byteLength)))},Nt=e=>{(Nt=qs())(e)},L={resolve:(...e)=>{for(var s,t="",o=!1,i=e.length-1;i>=-1&&!o;i--){if(s=i>=0?e[i]:n.cwd(),typeof s!="string")throw new TypeError("Arguments to path.resolve must be strings");if(!s)return"";t=s+"/"+t,o=u.isAbs(s)}return t=u.normalizeArray(t.split("/").filter(e=>!!e),!o).join("/"),(o?"/":"")+t||"."},relative:(e,t)=>{e=L.resolve(e).slice(1),t=L.resolve(t).slice(1);function r(e){for(var n,t=0;t<e.length;t++)if(e[t]!=="")break;for(n=e.length-1;n>=0;n--)if(e[n]!=="")break;return t>n?[]:e.slice(t,n-t+1)}for(var s,o=r(e.split("/")),i=r(t.split("/")),c=Math.min(o.length,i.length),a=c,n=0;n<c;n++)if(o[n]!==i[n]){a=n;break}for(s=[],n=a;n<o.length;n++)s.push("..");return s=s.concat(i.slice(a)),s.join("/")}},ve=[],be=(e,t,n)=>{var o=n>0?n:Ve(e)+1,s=new Array(o),i=_t(e,s,0,s.length);return t&&(s.length=i),s},Zs=()=>{if(!ve.length){var t,n,s,o,e=null;if(b){n=256,s=Buffer.alloc(n),t=0,o=process.stdin.fd;try{t=K.readSync(o,s,0,n)}catch(e){if(e.toString().includes("EOF"))t=0;else throw e}t>0&&(e=s.slice(0,t).toString("utf-8"))}else globalThis.window?.prompt&&(e=window.prompt("Input: "),e!==null&&(e+=`
`));if(!e)return null;ve=be(e,!0)}return ve.shift()},A={ttys:[],init(){},shutdown(){},register(e,t){A.ttys[e]={input:[],output:[],ops:t},n.registerDevice(e,A.stream_ops)},stream_ops:{open(e){var t=A.ttys[e.node.rdev];if(!t)throw new n.ErrnoError(43);e.tty=t,e.seekable=!1},close(e){e.tty.ops.fsync(e.tty)},fsync(e){e.tty.ops.fsync(e.tty)},read(e,t,s,o){if(!e.tty||!e.tty.ops.get_char)throw new n.ErrnoError(60);for(var a,r=0,c=0;c<o;c++){try{a=e.tty.ops.get_char(e.tty)}catch{throw new n.ErrnoError(29)}if(a===void 0&&r===0)throw new n.ErrnoError(6);if(a==null)break;r++,t[s+c]=a}return r&&(e.node.atime=Date.now()),r},write(e,t,s,o){if(!e.tty||!e.tty.ops.put_char)throw new n.ErrnoError(60);try{for(var a=0;a<o;a++)e.tty.ops.put_char(e.tty,t[s+a])}catch{throw new n.ErrnoError(29)}return o&&(e.node.mtime=e.node.ctime=Date.now()),a}},default_tty_ops:{get_char(){return Zs()},put_char(e,t){t===null||t===10?(U(N(e.output)),e.output=[]):t!=0&&e.output.push(t)},fsync(e){e.output?.length>0&&(U(N(e.output)),e.output=[])},ioctl_tcgets(){return{c_iflag:25856,c_oflag:5,c_cflag:191,c_lflag:35387,c_cc:[3,28,127,21,4,0,1,0,17,19,26,0,18,15,23,22,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0]}},ioctl_tcsets(){return 0},ioctl_tiocgwinsz(){return[24,80]}},default_tty1_ops:{put_char(e,t){t===null||t===10?(g(N(e.output)),e.output=[]):t!=0&&e.output.push(t)},fsync(e){e.output?.length>0&&(g(N(e.output)),e.output=[])}}},Je=e=>{y()},c={ops_table:null,mount(){return c.createNode(null,"/",16895,0)},createNode(e,t,s,o){if(n.isBlkdev(s)||n.isFIFO(s))throw new n.ErrnoError(63);c.ops_table||={dir:{node:{getattr:c.node_ops.getattr,setattr:c.node_ops.setattr,lookup:c.node_ops.lookup,mknod:c.node_ops.mknod,rename:c.node_ops.rename,unlink:c.node_ops.unlink,rmdir:c.node_ops.rmdir,readdir:c.node_ops.readdir,symlink:c.node_ops.symlink},stream:{llseek:c.stream_ops.llseek}},file:{node:{getattr:c.node_ops.getattr,setattr:c.node_ops.setattr},stream:{llseek:c.stream_ops.llseek,read:c.stream_ops.read,write:c.stream_ops.write,mmap:c.stream_ops.mmap,msync:c.stream_ops.msync}},link:{node:{getattr:c.node_ops.getattr,setattr:c.node_ops.setattr,readlink:c.node_ops.readlink},stream:{}},chrdev:{node:{getattr:c.node_ops.getattr,setattr:c.node_ops.setattr},stream:n.chrdev_stream_ops}};var i=n.createNode(e,t,s,o);return n.isDir(i.mode)?(i.node_ops=c.ops_table.dir.node,i.stream_ops=c.ops_table.dir.stream,i.contents={}):n.isFile(i.mode)?(i.node_ops=c.ops_table.file.node,i.stream_ops=c.ops_table.file.stream,i.usedBytes=0,i.contents=null):n.isLink(i.mode)?(i.node_ops=c.ops_table.link.node,i.stream_ops=c.ops_table.link.stream):n.isChrdev(i.mode)&&(i.node_ops=c.ops_table.chrdev.node,i.stream_ops=c.ops_table.chrdev.stream),i.atime=i.mtime=i.ctime=Date.now(),e&&(e.contents[t]=i,e.atime=e.mtime=e.ctime=i.atime),i},getFileDataAsTypedArray(e){return e.contents?e.contents.subarray?e.contents.subarray(0,e.usedBytes):new Uint8Array(e.contents):new Uint8Array(0)},expandFileStorage(e,t){var s,o,n=e.contents?e.contents.length:0;if(n>=t)return;s=1024*1024,t=Math.max(t,n*(n<s?2:1.125)>>>0),n!=0&&(t=Math.max(t,256)),o=e.contents,e.contents=new Uint8Array(t),e.usedBytes>0&&e.contents.set(o.subarray(0,e.usedBytes),0)},resizeFileStorage(e,t){if(e.usedBytes==t)return;if(t==0)e.contents=null,e.usedBytes=0;else{var n=e.contents;e.contents=new Uint8Array(t),n&&e.contents.set(n.subarray(0,Math.min(t,e.usedBytes))),e.usedBytes=t}},node_ops:{getattr(e){var t={};return t.dev=n.isChrdev(e.mode)?e.id:1,t.ino=e.id,t.mode=e.mode,t.nlink=1,t.uid=0,t.gid=0,t.rdev=e.rdev,n.isDir(e.mode)?t.size=4096:n.isFile(e.mode)?t.size=e.usedBytes:n.isLink(e.mode)?t.size=e.link.length:t.size=0,t.atime=new Date(e.atime),t.mtime=new Date(e.mtime),t.ctime=new Date(e.ctime),t.blksize=4096,t.blocks=Math.ceil(t.size/t.blksize),t},setattr(e,t){for(const n of["mode","atime","mtime","ctime"])t[n]!=null&&(e[n]=t[n]);t.size!==void 0&&c.resizeFileStorage(e,t.size)},lookup(){throw c.doesNotExistError||(c.doesNotExistError=new n.ErrnoError(44),c.doesNotExistError.stack="<generic error, no stack>"),c.doesNotExistError},mknod(e,t,n,s){return c.createNode(e,t,n,s)},rename(e,t,s){var o,i;try{o=n.lookupNode(t,s)}catch{}if(o){if(n.isDir(e.mode))for(i in o.contents)throw new n.ErrnoError(55);n.hashRemoveNode(o)}delete e.parent.contents[e.name],t.contents[s]=e,e.name=s,t.ctime=t.mtime=e.parent.ctime=e.parent.mtime=Date.now()},unlink(e,t){delete e.contents[t],e.ctime=e.mtime=Date.now()},rmdir(e,t){var o,s=n.lookupNode(e,t);for(o in s.contents)throw new n.ErrnoError(55);delete e.contents[t],e.ctime=e.mtime=Date.now()},readdir(e){return[".","..",...Object.keys(e.contents)]},symlink(e,t,n){var s=c.createNode(e,t,511|40960,0);return s.link=n,s},readlink(e){if(!n.isLink(e.mode))throw new n.ErrnoError(28);return e.link}},stream_ops:{read(e,t,n,s,o){var i,a,r=e.node.contents;if(o>=e.node.usedBytes)return 0;if(i=Math.min(e.node.usedBytes-o,s),i>8&&r.subarray)t.set(r.subarray(o,o+i),n);else for(a=0;a<i;a++)t[n+a]=r[o+a];return i},write(e,t,n,s,i,a){if(t.buffer===(o(),v).buffer&&(a=!1),!s)return 0;var l,r=e.node;if(r.mtime=r.ctime=Date.now(),t.subarray&&(!r.contents||r.contents.subarray)){if(a)return r.contents=t.subarray(n,n+s),r.usedBytes=s,s;if(r.usedBytes===0&&i===0)return r.contents=t.slice(n,n+s),r.usedBytes=s,s;if(i+s<=r.usedBytes)return r.contents.set(t.subarray(n,n+s),i),s}if(c.expandFileStorage(r,i+s),r.contents.subarray&&t.subarray)r.contents.set(t.subarray(n,n+s),i);else for(l=0;l<s;l++)r.contents[i+l]=t[n+l];return r.usedBytes=Math.max(r.usedBytes,i+s),s},llseek(e,t,s){var o=t;if(s===1?o+=e.position:s===2&&n.isFile(e.node.mode)&&(o+=e.node.usedBytes),o<0)throw new n.ErrnoError(28);return o},mmap(e,t,s,i,a){if(!n.isFile(e.node.mode))throw new n.ErrnoError(43);var c,l,r=e.node.contents;if(!(a&2)&&r&&r.buffer===(o(),v).buffer)l=!1,c=r.byteOffset;else{if(l=!0,c=Je(t),!c)throw new n.ErrnoError(48);r&&((s>0||s+t<r.length)&&(r.subarray?r=r.subarray(s,s+t):r=Array.prototype.slice.call(r,s,s+t)),(o(),v).set(r,c))}return{ptr:c,allocated:l}},msync(e,t,n,s){return c.stream_ops.write(e,t,0,s,n,!1),0}}},no=e=>{var n={r:0,"r+":2,w:512|64|1,"w+":512|64|2,a:1024|64|1,"a+":1024|64|2},t=n[e];if(typeof t=="undefined")throw new Error(`Unknown file open mode: ${e}`);return t},Be=(e,t)=>{var n=0;return e&&(n|=292|73),t&&(n|=146),n},oo=async e=>{var t=await Ue(e);return new Uint8Array(t)},At=(...e)=>n.createDataFile(...e),ao=e=>e,ro=async(e,t)=>{typeof i!="undefined"&&i.init();for(var n of ge)if(n.canHandle(t))return n.handle(e,t);return e},Fe=async(e,t,n,s,o,i,a,r)=>{var c,l=t?L.resolve(u.join2(e,t)):e,d=ao(`cp ${l}`);_e(d);try{c=n,typeof n=="string"&&(c=await oo(n)),c=await ro(c,l),r?.(),i||At(e,t,c,s,o,a)}finally{ye(d)}},lo=(e,t,n,s,o,i,a,r,c,l)=>{Fe(e,t,n,s,o,r,c,l).then(i).catch(a)},n={root:null,mounts:[],devices:{},streams:[],nextInode:1,nameTable:null,currentPath:"/",initialized:!1,ignorePermissions:!0,filesystems:null,syncFSRequests:0,readFiles:{},ErrnoError:class{name="ErrnoError";constructor(e){this.errno=e}},FSStream:class{shared={};get object(){return this.node}set object(e){this.node=e}get isRead(){return(this.flags&2097155)!==1}get isWrite(){return(this.flags&2097155)!==0}get isAppend(){return this.flags&1024}get flags(){return this.shared.flags}set flags(e){this.shared.flags=e}get position(){return this.shared.position}set position(e){this.shared.position=e}},FSNode:class{node_ops={};stream_ops={};readMode=292|73;writeMode=146;mounted=null;constructor(e,t,s,o){e||(e=this),this.parent=e,this.mount=e.mount,this.id=n.nextInode++,this.name=t,this.mode=s,this.rdev=o,this.atime=this.mtime=this.ctime=Date.now()}get read(){return(this.mode&this.readMode)===this.readMode}set read(e){e?this.mode|=this.readMode:this.mode&=~this.readMode}get write(){return(this.mode&this.writeMode)===this.writeMode}set write(e){e?this.mode|=this.writeMode:this.mode&=~this.writeMode}get isFolder(){return n.isDir(this.mode)}get isDevice(){return n.isChrdev(this.mode)}},lookupPath(e,t={}){if(!e)throw new n.ErrnoError(44);t.follow_mount??=!0,u.isAbs(e)||(e=n.cwd()+"/"+e);linkloop:for(var s,o,i,a,r,c,l=0;l<40;l++){for(i=e.split("/").filter(e=>!!e),s=n.root,a="/",o=0;o<i.length;o++){if(r=o===i.length-1,r&&t.parent)break;if(i[o]===".")continue;if(i[o]===".."){if(a=u.dirname(a),n.isRoot(s)){e=a+"/"+i.slice(o+1).join("/"),l--;continue linkloop}s=s.parent;continue}a=u.join2(a,i[o]);try{s=n.lookupNode(s,i[o])}catch(e){if(e?.errno===44&&r&&t.noent_okay)return{path:a};throw e}if(n.isMountpoint(s)&&(!r||t.follow_mount)&&(s=s.mounted.root),n.isLink(s.mode)&&(!r||t.follow)){if(!s.node_ops.readlink)throw new n.ErrnoError(52);c=s.node_ops.readlink(s),u.isAbs(c)||(c=u.dirname(a)+"/"+c),e=c+"/"+i.slice(o+1).join("/");continue linkloop}}return{path:a,node:s}}throw new n.ErrnoError(32)},getPath(e){for(;!0;){if(n.isRoot(e)){var t,s=e.mount.mountpoint;return t?s[s.length-1]!=="/"?`${s}/${t}`:s+t:s}t=t?`${e.name}/${t}`:e.name,e=e.parent}},hashName(e,t){for(var s=0,o=0;o<t.length;o++)s=(s<<5)-s+t.charCodeAt(o)|0;return(e+s>>>0)%n.nameTable.length},hashAddNode(e){var t=n.hashName(e.parent.id,e.name);e.name_next=n.nameTable[t],n.nameTable[t]=e},hashRemoveNode(e){var t,s=n.hashName(e.parent.id,e.name);if(n.nameTable[s]===e)n.nameTable[s]=e.name_next;else for(t=n.nameTable[s];t;){if(t.name_next===e){t.name_next=e.name_next;break}t=t.name_next}},lookupNode(e,t){var s,i,a,o=n.mayLookup(e);if(o)throw new n.ErrnoError(o);for(i=n.hashName(e.id,t),s=n.nameTable[i];s;s=s.name_next)if(a=s.name,s.parent.id===e.id&&a===t)return s;return n.lookup(e,t)},createNode(e,t,s,o){var i=new n.FSNode(e,t,s,o);return n.hashAddNode(i),i},destroyNode(e){n.hashRemoveNode(e)},isRoot(e){return e===e.parent},isMountpoint(e){return!!e.mounted},isFile(e){return(e&61440)===32768},isDir(e){return(e&61440)===16384},isLink(e){return(e&61440)===40960},isChrdev(e){return(e&61440)===8192},isBlkdev(e){return(e&61440)===24576},isFIFO(e){return(e&61440)===4096},isSocket(e){return(e&49152)===49152},flagsToPermissionString(e){var t=["r","w","rw"][e&3];return e&512&&(t+="w"),t},nodePermissions(e,t){return n.ignorePermissions?0:t.includes("r")&&!(e.mode&292)?2:t.includes("w")&&!(e.mode&146)?2:t.includes("x")&&!(e.mode&73)?2:0},mayLookup(e){if(!n.isDir(e.mode))return 54;var t=n.nodePermissions(e,"x");return t?t:e.node_ops.lookup?0:2},mayCreate(e,t){if(!n.isDir(e.mode))return 54;try{var s=n.lookupNode(e,t);return 20}catch{}return n.nodePermissions(e,"wx")},mayDelete(e,t,s){try{o=n.lookupNode(e,t)}catch(e){return e.errno}var o,i=n.nodePermissions(e,"wx");if(i)return i;if(s){{if(!n.isDir(o.mode))return 54;if(n.isRoot(o)||n.getPath(o)===n.cwd())return 10}}else if(n.isDir(o.mode))return 31;return 0},mayOpen(e,t){return e?n.isLink(e.mode)?32:n.isDir(e.mode)&&(n.flagsToPermissionString(t)!=="r"||t&(512|64))?31:n.nodePermissions(e,n.flagsToPermissionString(t)):44},checkOpExists(e,t){if(!e)throw new n.ErrnoError(t);return e},MAX_OPEN_FDS:4096,nextfd(){for(var e=0;e<=n.MAX_OPEN_FDS;e++)if(!n.streams[e])return e;throw new n.ErrnoError(33)},getStreamChecked(e){var t=n.getStream(e);if(!t)throw new n.ErrnoError(8);return t},getStream:e=>n.streams[e],createStream(e,t=-1){return e=Object.assign(new n.FSStream,e),t==-1&&(t=n.nextfd()),e.fd=t,n.streams[t]=e,e},closeStream(e){n.streams[e]=null},dupStream(e,t=-1){var s=n.createStream(e,t);return s.stream_ops?.dup?.(s),s},doSetAttr(e,t,s){var o=e?.stream_ops.setattr,i=o?e:t;o??=t.node_ops.setattr,n.checkOpExists(o,63),o(i,s)},chrdev_stream_ops:{open(e){var t=n.getDevice(e.node.rdev);e.stream_ops=t.stream_ops,e.stream_ops.open?.(e)},llseek(){throw new n.ErrnoError(70)}},major:e=>e>>8,minor:e=>e&255,makedev:(e,t)=>e<<8|t,registerDevice(e,t){n.devices[e]={stream_ops:t}},getDevice:e=>n.devices[e],getMounts(e){for(var n,s=[],t=[e];t.length;)n=t.pop(),s.push(n),t.push(...n.mounts);return s},syncfs(e,t){typeof e=="function"&&(t=e,e=!1),n.syncFSRequests++,n.syncFSRequests>1&&g(`warning: ${n.syncFSRequests} FS.syncfs operations in flight at once, probably just doing extra work`);var o,i=n.getMounts(n.root.mount),r=0;function a(e){return n.syncFSRequests--,t(e)}function s(e){if(e){if(!s.errored)return s.errored=!0,a(e);return}++r>=i.length&&a(null)}for(o of i)o.type.syncfs?o.type.syncfs(o,e,s):s(null)},mount(e,t,s){var o,i,a,c,r=s==="/",l=!s;if(r&&n.root)throw new n.ErrnoError(10);if(!r&&!l){if(c=n.lookupPath(s,{follow_mount:!1}),s=c.path,o=c.node,n.isMountpoint(o))throw new n.ErrnoError(10);if(!n.isDir(o.mode))throw new n.ErrnoError(54)}return i={type:e,opts:t,mountpoint:s,mounts:[]},a=e.mount(i),a.mount=i,i.root=a,r?n.root=a:o&&(o.mounted=i,o.mount&&o.mount.mounts.push(i)),a},unmount(e){var t,s,o,a,r,c,l,i=n.lookupPath(e,{follow_mount:!1});if(!n.isMountpoint(i.node))throw new n.ErrnoError(28);t=i.node,o=t.mounted,a=n.getMounts(o);for([l,s]of Object.entries(n.nameTable))for(;s;)r=s.name_next,a.includes(s.mount)&&n.destroyNode(s),s=r;t.mounted=null,c=t.mount.mounts.indexOf(o),t.mount.mounts.splice(c,1)},lookup(e,t){return e.node_ops.lookup(e,t)},mknod(e,t,s){var a,r=n.lookupPath(e,{parent:!0}),i=r.node,o=u.basename(e);if(!o)throw new n.ErrnoError(28);if(o==="."||o==="..")throw new n.ErrnoError(20);if(a=n.mayCreate(i,o),a)throw new n.ErrnoError(a);if(!i.node_ops.mknod)throw new n.ErrnoError(63);return i.node_ops.mknod(i,o,t,s)},statfs(e){return n.statfsNode(n.lookupPath(e,{follow:!0}).node)},statfsStream(e){return n.statfsNode(e.node)},statfsNode(e){var t={bsize:4096,frsize:4096,blocks:1e6,bfree:5e5,bavail:5e5,files:n.nextInode,ffree:n.nextInode-1,fsid:42,flags:2,namelen:255};return e.node_ops.statfs&&Object.assign(t,e.node_ops.statfs(e.mount.opts.root)),t},create(e,t=438){return t&=4095,t|=32768,n.mknod(e,t,0)},mkdir(e,t=511){return t&=511|512,t|=16384,n.mknod(e,t,0)},mkdirTree(e,t){var o,i=e.split("/"),s="";for(o of i){if(!o)continue;(s||u.isAbs(e))&&(s+="/"),s+=o;try{n.mkdir(s,t)}catch(e){if(e.errno!=20)throw e}}},mkdev(e,t,s){return typeof s=="undefined"&&(s=t,t=438),t|=8192,n.mknod(e,t,s)},symlink(e,t){if(!L.resolve(e))throw new n.ErrnoError(44);var o,i,a=n.lookupPath(t,{parent:!0}),s=a.node;if(!s)throw new n.ErrnoError(44);if(o=u.basename(t),i=n.mayCreate(s,o),i)throw new n.ErrnoError(i);if(!s.node_ops.symlink)throw new n.ErrnoError(63);return s.node_ops.symlink(s,o,e)},rename(e,t){var s,a,r,l,d,f=u.dirname(e),p=u.dirname(t),h=u.basename(e),c=u.basename(t),m=n.lookupPath(e,{parent:!0}),o=m.node,m=n.lookupPath(t,{parent:!0}),i=m.node;if(!o||!i)throw new n.ErrnoError(44);if(o.mount!==i.mount)throw new n.ErrnoError(75);if(a=n.lookupNode(o,h),l=L.relative(e,p),l.charAt(0)!==".")throw new n.ErrnoError(28);if(l=L.relative(t,f),l.charAt(0)!==".")throw new n.ErrnoError(55);try{r=n.lookupNode(i,c)}catch{}if(a===r)return;if(d=n.isDir(a.mode),s=n.mayDelete(o,h,d),s)throw new n.ErrnoError(s);if(s=r?n.mayDelete(i,c,d):n.mayCreate(i,c),s)throw new n.ErrnoError(s);if(!o.node_ops.rename)throw new n.ErrnoError(63);if(n.isMountpoint(a)||r&&n.isMountpoint(r))throw new n.ErrnoError(10);if(i!==o&&(s=n.nodePermissions(o,"w"),s))throw new n.ErrnoError(s);n.hashRemoveNode(a);try{o.node_ops.rename(a,i,c),a.parent=i}catch(e){throw e}finally{n.hashAddNode(a)}},rmdir(e){var a=n.lookupPath(e,{parent:!0}),t=a.node,s=u.basename(e),o=n.lookupNode(t,s),i=n.mayDelete(t,s,!0);if(i)throw new n.ErrnoError(i);if(!t.node_ops.rmdir)throw new n.ErrnoError(63);if(n.isMountpoint(o))throw new n.ErrnoError(10);t.node_ops.rmdir(t,s),n.destroyNode(o)},readdir(e){var s=n.lookupPath(e,{follow:!0}),t=s.node,o=n.checkOpExists(t.node_ops.readdir,54);return o(t)},unlink(e){var s,o,i,a=n.lookupPath(e,{parent:!0}),t=a.node;if(!t)throw new n.ErrnoError(44);if(s=u.basename(e),o=n.lookupNode(t,s),i=n.mayDelete(t,s,!1),i)throw new n.ErrnoError(i);if(!t.node_ops.unlink)throw new n.ErrnoError(63);if(n.isMountpoint(o))throw new n.ErrnoError(10);t.node_ops.unlink(t,s),n.destroyNode(o)},readlink(e){var s=n.lookupPath(e),t=s.node;if(!t)throw new n.ErrnoError(44);if(!t.node_ops.readlink)throw new n.ErrnoError(28);return t.node_ops.readlink(t)},stat(e,t){var o=n.lookupPath(e,{follow:!t}),s=o.node,i=n.checkOpExists(s.node_ops.getattr,63);return i(s)},fstat(e){var s=n.getStreamChecked(e),o=s.node,t=s.stream_ops.getattr,i=t?s:o;return t??=o.node_ops.getattr,n.checkOpExists(t,63),t(i)},lstat(e){return n.stat(e,!0)},doChmod(e,t,s,o){n.doSetAttr(e,t,{mode:s&4095|t.mode&~4095,ctime:Date.now(),dontFollow:o})},chmod(e,t,s){if(typeof e=="string"){var o,i=n.lookupPath(e,{follow:!s});o=i.node}else o=e;n.doChmod(null,o,t,s)},lchmod(e,t){n.chmod(e,t,!0)},fchmod(e,t){var s=n.getStreamChecked(e);n.doChmod(s,s.node,t,!1)},doChown(e,t,s){n.doSetAttr(e,t,{timestamp:Date.now(),dontFollow:s})},chown(e,t,s,o){if(typeof e=="string"){var i,a=n.lookupPath(e,{follow:!o});i=a.node}else i=e;n.doChown(null,i,o)},lchown(e,t,s){n.chown(e,t,s,!0)},fchown(e){var o=n.getStreamChecked(e);n.doChown(o,o.node,!1)},doTruncate(e,t,s){if(n.isDir(t.mode))throw new n.ErrnoError(31);if(!n.isFile(t.mode))throw new n.ErrnoError(28);var o=n.nodePermissions(t,"w");if(o)throw new n.ErrnoError(o);n.doSetAttr(e,t,{size:s,timestamp:Date.now()})},truncate(e,t){if(t<0)throw new n.ErrnoError(28);if(typeof e=="string"){var s,o=n.lookupPath(e,{follow:!0});s=o.node}else s=e;n.doTruncate(null,s,t)},ftruncate(e,t){var s=n.getStreamChecked(e);if(t<0||(s.flags&2097155)===0)throw new n.ErrnoError(28);n.doTruncate(s,s.node,t)},utime(e,t,s){var i=n.lookupPath(e,{follow:!0}),o=i.node,a=n.checkOpExists(o.node_ops.setattr,63);a(o,{atime:t,mtime:s})},open(e,t,o=438){if(e==="")throw new n.ErrnoError(44);if(t=typeof t=="string"?no(t):t,t&64?o=o&4095|32768:o=0,typeof e=="object")i=e;else{l=e.endsWith("/");var i,a,r,c,l,d=n.lookupPath(e,{follow:!(t&131072),noent_okay:!0});i=d.node,e=d.path}if(a=!1,t&64)if(i){if(t&128)throw new n.ErrnoError(20)}else if(l)throw new n.ErrnoError(31);else i=n.mknod(e,o|511,0),a=!0;if(!i)throw new n.ErrnoError(44);if(n.isChrdev(i.mode)&&(t&=~512),t&65536&&!n.isDir(i.mode))throw new n.ErrnoError(54);if(!a&&(c=n.mayOpen(i,t),c))throw new n.ErrnoError(c);return t&512&&!a&&n.truncate(i,0),t&=~(128|512|131072),r=n.createStream({node:i,path:n.getPath(i),flags:t,seekable:!0,position:0,stream_ops:i.stream_ops,ungotten:[],error:!1}),r.stream_ops.open&&r.stream_ops.open(r),a&&n.chmod(i,o&511),s.logReadFiles&&!(t&1)&&(e in n.readFiles||(n.readFiles[e]=1)),r},close(e){if(n.isClosed(e))throw new n.ErrnoError(8);e.getdents&&(e.getdents=null);try{e.stream_ops.close&&e.stream_ops.close(e)}catch(e){throw e}finally{n.closeStream(e.fd)}e.fd=null},isClosed(e){return e.fd===null},llseek(e,t,s){if(n.isClosed(e))throw new n.ErrnoError(8);if(!e.seekable||!e.stream_ops.llseek)throw new n.ErrnoError(70);if(s!=0&&s!=1&&s!=2)throw new n.ErrnoError(28);return e.position=e.stream_ops.llseek(e,t,s),e.ungotten=[],e.position},read(e,t,s,o,i){if(o<0||i<0)throw new n.ErrnoError(28);if(n.isClosed(e))throw new n.ErrnoError(8);if((e.flags&2097155)===1)throw new n.ErrnoError(8);if(n.isDir(e.node.mode))throw new n.ErrnoError(31);if(!e.stream_ops.read)throw new n.ErrnoError(28);var a,r=typeof i!="undefined";if(r){if(!e.seekable)throw new n.ErrnoError(70)}else i=e.position;return a=e.stream_ops.read(e,t,s,o,i),r||(e.position+=a),a},write(e,t,s,o,i,a){if(o<0||i<0)throw new n.ErrnoError(28);if(n.isClosed(e))throw new n.ErrnoError(8);if((e.flags&2097155)===0)throw new n.ErrnoError(8);if(n.isDir(e.node.mode))throw new n.ErrnoError(31);if(!e.stream_ops.write)throw new n.ErrnoError(28);e.seekable&&e.flags&1024&&n.llseek(e,0,2);var r,c=typeof i!="undefined";if(c){if(!e.seekable)throw new n.ErrnoError(70)}else i=e.position;return r=e.stream_ops.write(e,t,s,o,i,a),c||(e.position+=r),r},mmap(e,t,s,o,i){if((o&2)!==0&&(i&2)===0&&(e.flags&2097155)!==2)throw new n.ErrnoError(2);if((e.flags&2097155)===1)throw new n.ErrnoError(2);if(!e.stream_ops.mmap)throw new n.ErrnoError(43);if(!t)throw new n.ErrnoError(28);return e.stream_ops.mmap(e,t,s,o,i)},msync(e,t,n,s,o){return e.stream_ops.msync?e.stream_ops.msync(e,t,n,s,o):0},ioctl(e,t,s){if(!e.stream_ops.ioctl)throw new n.ErrnoError(59);return e.stream_ops.ioctl(e,t,s)},readFile(e,t={}){t.flags=t.flags||0,t.encoding=t.encoding||"binary",t.encoding!=="utf8"&&t.encoding!=="binary"&&y(`Invalid encoding type "${t.encoding}"`);var o=n.open(e,t.flags),a=n.stat(e),i=a.size,s=new Uint8Array(i);return n.read(o,s,0,i,0),t.encoding==="utf8"&&(s=N(s)),n.close(o),s},writeFile(e,t,s={}){s.flags=s.flags||577;var o=n.open(e,s.flags,s.mode);typeof t=="string"&&(t=new Uint8Array(be(t,!0))),ArrayBuffer.isView(t)?n.write(o,t,0,t.byteLength,void 0,s.canOwn):y("Unsupported data type"),n.close(o)},cwd:()=>n.currentPath,chdir(e){var s,t=n.lookupPath(e,{follow:!0});if(t.node===null)throw new n.ErrnoError(44);if(!n.isDir(t.node.mode))throw new n.ErrnoError(54);if(s=n.nodePermissions(t.node,"x"),s)throw new n.ErrnoError(s);n.currentPath=t.path},createDefaultDirectories(){n.mkdir("/tmp"),n.mkdir("/home"),n.mkdir("/home/web_user")},createDefaultDevices(){n.mkdir("/dev"),n.registerDevice(n.makedev(1,3),{read:()=>0,write:(e,t,n,s)=>s,llseek:()=>0}),n.mkdev("/dev/null",n.makedev(1,3)),A.register(n.makedev(5,0),A.default_tty_ops),A.register(n.makedev(6,0),A.default_tty1_ops),n.mkdev("/dev/tty",n.makedev(5,0)),n.mkdev("/dev/tty1",n.makedev(6,0));var e=new Uint8Array(1024),t=0,s=()=>(t===0&&(Nt(e),t=e.byteLength),e[--t]);n.createDevice("/dev","random",s),n.createDevice("/dev","urandom",s),n.mkdir("/dev/shm"),n.mkdir("/dev/shm/tmp")},createSpecialDirectories(){n.mkdir("/proc");var e=n.mkdir("/proc/self");n.mkdir("/proc/self/fd"),n.mount({mount(){var t=n.createNode(e,"fd",16895,73);return t.stream_ops={llseek:c.stream_ops.llseek},t.node_ops={lookup(e,t){var o=+t,i=n.getStreamChecked(o),s={parent:null,mount:{mountpoint:"fake"},node_ops:{readlink:()=>i.path},id:o+1};return s.parent=s,s},readdir(){return Array.from(n.streams.entries()).filter(([e,t])=>t).map(([e,t])=>e.toString())}},t}},{},"/proc/self/fd")},createStandardStreams(e,t,s){e?n.createDevice("/dev","stdin",e):n.symlink("/dev/tty","/dev/stdin"),t?n.createDevice("/dev","stdout",null,t):n.symlink("/dev/tty","/dev/stdout"),s?n.createDevice("/dev","stderr",null,s):n.symlink("/dev/tty1","/dev/stderr");var o=n.open("/dev/stdin",0),i=n.open("/dev/stdout",1),a=n.open("/dev/stderr",1)},staticInit(){n.nameTable=new Array(4096),n.mount(c,{},"/"),n.createDefaultDirectories(),n.createDefaultDevices(),n.createSpecialDirectories(),n.filesystems={MEMFS:c}},init(e,t,o){n.initialized=!0,e??=s.stdin,t??=s.stdout,o??=s.stderr,n.createStandardStreams(e,t,o)},quit(){n.initialized=!1;for(var e of n.streams)e&&n.close(e)},findObject(e,t){var s=n.analyzePath(e,t);return s.exists?s.object:null},analyzePath(e,t){try{var s,o=n.lookupPath(e,{follow:!t});e=o.path}catch{}s={isRoot:!1,exists:!1,error:0,name:null,path:null,object:null,parentExists:!1,parentPath:null,parentObject:null};try{o=n.lookupPath(e,{parent:!0}),s.parentExists=!0,s.parentPath=o.path,s.parentObject=o.node,s.name=u.basename(e),o=n.lookupPath(e,{follow:!t}),s.exists=!0,s.path=o.path,s.object=o.node,s.name=o.node.name,s.isRoot=o.path==="/"}catch(e){s.error=e.errno}return s},createPath(e,t){e=typeof e=="string"?e:n.getPath(e);for(var i,a,r=t.split("/").reverse();r.length;){if(a=r.pop(),!a)continue;i=u.join2(e,a);try{n.mkdir(i)}catch(e){if(e.errno!=20)throw e}e=i}return i},createFile(e,t,s,o,i){var a=u.join2(typeof e=="string"?e:n.getPath(e),t),r=Be(o,i);return n.create(a,r)},createDataFile(e,t,s,o,i,a){if(d=t,e&&(e=typeof e=="string"?e:n.getPath(e),d=t?u.join2(e,t):e),r=Be(o,i),c=n.create(d,r),s){if(typeof s=="string"){for(var r,c,d,h,m=new Array(s.length),l=0,f=s.length;l<f;++l)m[l]=s.charCodeAt(l);s=m}n.chmod(c,r|146),h=n.open(c,577),n.write(h,s,0,s.length,0,a),n.close(h),n.chmod(c,r)}},createDevice(e,t,s,o){var i,a=u.join2(typeof e=="string"?e:n.getPath(e),t),r=Be(!!s,!!o);return n.createDevice.major??=64,i=n.makedev(n.createDevice.major++,0),n.registerDevice(i,{open(e){e.seekable=!1},close(){o?.buffer?.length&&o(10)},read(e,t,o,i){for(var r,c=0,l=0;l<i;l++){try{r=s()}catch{throw new n.ErrnoError(29)}if(r===void 0&&c===0)throw new n.ErrnoError(6);if(r==null)break;c++,t[o+l]=r}return c&&(e.node.atime=Date.now()),c},write(e,t,s,i){for(var r=0;r<i;r++)try{o(t[s+r])}catch{throw new n.ErrnoError(29)}return i&&(e.node.mtime=e.node.ctime=Date.now()),r}}),n.mkdev(a,r,i)},forceLoadFile(e){if(e.isDevice||e.isFolder||e.link||e.contents)return!0;if(globalThis.XMLHttpRequest)y("Lazy loading should have been performed (contents set) in createLazyFile, but it was not. Lazy loading only works in web workers. Use --embed-file or --preload-file in emcc on the main thread.");else try{e.contents=ie(e.url)}catch{throw new n.ErrnoError(29)}},createLazyFile(e,t,s,i,a){class u{lengthKnown=!1;chunks=[];get(e){if(e>this.length-1||e<0)return void 0;var t=e%this.chunkSize,n=e/this.chunkSize|0;return this.getter(n)[t]}setDataGetter(e){this.getter=e}cacheLength(){var e,n,o,i,a,r,c,t=new XMLHttpRequest;t.open("HEAD",s,!1),t.send(null),t.status>=200&&t.status<300||t.status===304||y("Couldn't load "+s+". Status: "+t.status),e=Number(t.getResponseHeader("Content-length")),a=(i=t.getResponseHeader("Accept-Ranges"))&&i==="bytes",r=(i=t.getResponseHeader("Content-Encoding"))&&i==="gzip",n=1024*1024,a||(n=e),c=(t,o)=>{t>o&&y("invalid range ("+t+", "+o+") or no bytes requested!"),o>e-1&&y("only "+e+" bytes available! programmer error!");var i=new XMLHttpRequest;return i.open("GET",s,!1),e!==n&&i.setRequestHeader("Range","bytes="+t+"-"+o),i.responseType="arraybuffer",i.overrideMimeType&&i.overrideMimeType("text/plain; charset=x-user-defined"),i.send(null),i.status>=200&&i.status<300||i.status===304||y("Couldn't load "+s+". Status: "+i.status),i.response!==void 0?new Uint8Array(i.response||[]):be(i.responseText||"",!0)},o=this,o.setDataGetter(t=>{var i=t*n,s=(t+1)*n-1,s=Math.min(s,e-1);return typeof o.chunks[t]=="undefined"&&(o.chunks[t]=c(i,s)),typeof o.chunks[t]=="undefined"&&y("doXHR failed!"),o.chunks[t]}),(r||!e)&&(n=e=1,e=this.getter(0).length,n=e,U("LazyFiles on gzip forces download of the whole file when length is accessed")),this._length=e,this._chunkSize=n,this.lengthKnown=!0}get length(){return this.lengthKnown||this.cacheLength(),this._length}get chunkSize(){return this.lengthKnown||this.cacheLength(),this._chunkSize}}if(globalThis.XMLHttpRequest){z||y("Cannot do synchronous binary XHRs outside webworkers in modern browsers. Use --embed-file or --preload-file in emcc");var r,l,h=new u,c={isDevice:!1,contents:h}}else c={isDevice:!1,url:s};r=n.createFile(e,t,c,i,a),c.contents?r.contents=c.contents:c.url&&(r.contents=null,r.url=c.url),Object.defineProperties(r,{usedBytes:{get:function(){return this.contents.length}}}),l={};for(const[e,t]of Object.entries(r.stream_ops))l[e]=(...e)=>(n.forceLoadFile(r),t(...e));function d(e,t,n,s,o){var i,r,a=e.node.contents;if(o>=a.length)return 0;if(r=Math.min(a.length-o,s),a.slice)for(i=0;i<r;i++)t[n+i]=a[o+i];else for(i=0;i<r;i++)t[n+i]=a.get(o+i);return r}return l.read=(e,t,s,o,i)=>(n.forceLoadFile(r),d(e,t,s,o,i)),l.mmap=(e,t,s)=>{n.forceLoadFile(r);var c=Je(t);if(!c)throw new n.ErrnoError(48);return d(e,(o(),v),c,t,s),{ptr:c,allocated:!0}},r.stream_ops=l,r}},Y={DEFAULT_POLLMASK:5,calculateAt(e,t,s){if(u.isAbs(t))return t;if(e===-100)o=n.cwd();else{var o,i=Y.getStreamFromFD(e);o=i.path}if(t.length==0){if(!s)throw new n.ErrnoError(44);return o}return o+"/"+t},writeStat(e,t){(o(),r)[e>>2]=t.dev,(o(),r)[e+4>>2]=t.mode,(o(),r)[e+8>>2]=t.nlink,(o(),r)[e+12>>2]=t.uid,(o(),r)[e+16>>2]=t.gid,(o(),r)[e+20>>2]=t.rdev,(o(),f)[e+24>>3]=BigInt(t.size),(o(),O)[e+32>>2]=4096,(o(),O)[e+36>>2]=t.blocks;var n=t.atime.getTime(),s=t.mtime.getTime(),i=t.ctime.getTime();return(o(),f)[e+40>>3]=BigInt(Math.floor(n/1e3)),(o(),r)[e+48>>2]=n%1e3*1e3*1e3,(o(),f)[e+56>>3]=BigInt(Math.floor(s/1e3)),(o(),r)[e+64>>2]=s%1e3*1e3*1e3,(o(),f)[e+72>>3]=BigInt(Math.floor(i/1e3)),(o(),r)[e+80>>2]=i%1e3*1e3*1e3,(o(),f)[e+88>>3]=BigInt(t.ino),0},writeStatFs(e,t){(o(),r)[e+4>>2]=t.bsize,(o(),r)[e+60>>2]=t.bsize,(o(),f)[e+8>>3]=BigInt(t.blocks),(o(),f)[e+16>>3]=BigInt(t.bfree),(o(),f)[e+24>>3]=BigInt(t.bavail),(o(),f)[e+32>>3]=BigInt(t.files),(o(),f)[e+40>>3]=BigInt(t.ffree),(o(),r)[e+48>>2]=t.fsid,(o(),r)[e+64>>2]=t.flags,(o(),r)[e+56>>2]=t.namelen},doMsync(e,t,s,i,a){if(!n.isFile(t.node.mode))throw new n.ErrnoError(43);if(i&2)return 0;var r=(o(),w).slice(e,e+s);n.msync(t,r,a,s,i)},getStreamFromFD(e){var t=n.getStreamChecked(e);return t},varargs:void 0,getStr(e){var t=rt(e);return t}};function mo(e){if(h)return C(5,0,1,e);try{var t=Y.getStreamFromFD(e);return n.close(t),0}catch(e){if(typeof n=="undefined"||e.name!=="ErrnoError")throw e;return e.errno}}fo=(e,t,s,i)=>{for(var a,c,u,l=0,d=0;d<s;d++){if(u=(o(),r)[t>>2],c=(o(),r)[t+4>>2],t+=8,a=n.read(e,(o(),v),u,c,i),a<0)return-1;if(l+=a,a<c)break;typeof i!="undefined"&&(i+=a)}return l};function po(e,t,s,i){if(h)return C(6,0,1,e,t,s,i);try{var c=Y.getStreamFromFD(e),a=fo(c,t,s);return(o(),r)[i>>2]=a,0}catch(e){if(typeof n=="undefined"||e.name!=="ErrnoError")throw e;return e.errno}}function go(e,t,s,i){if(h)return C(7,0,1,e,t,s,i);t=vt(t);try{if(isNaN(t))return 61;var a=Y.getStreamFromFD(e);return n.llseek(a,t,s),(o(),f)[i>>3]=BigInt(a.position),a.getdents&&t===0&&s===0&&(a.getdents=null),0}catch(e){if(typeof n=="undefined"||e.name!=="ErrnoError")throw e;return e.errno}}vo=(e,t,s,i)=>{for(var a,c,u,l=0,d=0;d<s;d++){if(u=(o(),r)[t>>2],c=(o(),r)[t+4>>2],t+=8,a=n.write(e,(o(),v),u,c,i),a<0)return-1;if(l+=a,a<c)break;typeof i!="undefined"&&(i+=a)}return l};function bo(e,t,s,i){if(h)return C(8,0,1,e,t,s,i);try{var c=Y.getStreamFromFD(e),a=vo(c,t,s);return(o(),r)[i>>2]=a,0}catch(e){if(typeof n=="undefined"||e.name!=="ErrnoError")throw e;return e.errno}}if(jo=(...e)=>n.createPath(...e),yo=(...e)=>n.unlink(...e),_o=(...e)=>n.createLazyFile(...e),wo=(...e)=>n.createDevice(...e),d.init(),yn(),As(),n.createPreloadedFile=lo,n.preloadFile=Fe,n.staticInit(),Do(),s.preloadPlugins&&(ge=s.preloadPlugins),s.noExitRuntime&&(We=s.noExitRuntime),s.print&&(U=s.print),s.printErr&&(g=s.printErr),s.wasmBinary&&(le=s.wasmBinary),s.arguments&&(Rt=s.arguments),s.thisProgram&&(Le=s.thisProgram),s.preInit)for(typeof s.preInit=="function"&&(s.preInit=[s.preInit]);s.preInit.length>0;)s.preInit.shift()();s.addRunDependency=_e,s.removeRunDependency=ye,s.FS_preloadFile=Fe,s.FS_unlink=yo,s.FS_createPath=jo,s.FS_createDevice=wo,s.FS_createDataFile=At,s.FS_createLazyFile=_o,Oo=[Xs,Gs,os,Ws,Us,mo,po,go,bo];function Ao(e){xo=e.fa,Co=e.ga,we=e.ia,It=s._malloc=e.ja,E=s._free=e.ka,$o=e.la,$t=e.ma,Eo=e.na,ho=e.oa,uo=e.pa,Bt=e.qa,co=e.ra,io=e.sa,Ns=e.ta,Ts=e.ua,gs=e.va,Io=Pn=e.ha}function Wo(){un={u:rs,O:tt,I:$n,ca:In,n:Hn,G:Rn,aa:Ln,l:an,v:hn,k:mn,d:fn,r:gn,b:vn,_:On,e:Cn,c:kn,F:Sn,j:Mn,s:Fn,m:Tn,q:Dn,$:Vn,B:Xn,da:Qn,A:Zn,o:Jn,f:es,ba:ts,T:ns,K:is,Q:cs,C:ls,S:Ze,Y:ds,i:vs,p:De,x:bs,h:js,w:ys,z:_s,g:ws,y:Os,H:xs,P:Po,D:zs,X:Ds,L:Ls,t:pt,M:Rs,J:Is,U:Ws,V:Us,N:Ae,Z:mo,W:po,R:go,E:bo,a:k}}function Xe(){if(S>0){V=Xe;return}if(h){kt?.(s),ko();return}if(So(),S>0){V=Xe;return}function e(){if(s.calledRun=!0,ue)return;ko(),kt?.(s),s.onRuntimeInitialized?.(),si()}s.setStatus?(s.setStatus("Running..."),setTimeout(()=>{setTimeout(()=>s.setStatus(""),1),e()},1)):e()}h||(B=await to(),Xe()),typeof s.FS=="undefined"&&typeof n!="undefined"&&(s.FS=n),typeof a=="undefined"&&(a=s),s.imread=function(e){var n,s,o,t=null;if(typeof e=="string"?t=document.getElementById(e):t=e,n=null,s=null,t instanceof HTMLImageElement)n=document.createElement("canvas"),n.width=t.width,n.height=t.height,s=n.getContext("2d",{willReadFrequently:!0}),s.drawImage(t,0,0,t.width,t.height);else if(t instanceof HTMLCanvasElement||t instanceof OffscreenCanvas)n=t,s=n.getContext("2d");else throw new Error("Please input the valid canvas or img id.");return o=s.getImageData(0,0,n.width,n.height),a.matFromImageData(o)},s.imshow=function(e,t){var n,o,i,r,c,l,s=null;if(typeof e=="string"?s=document.getElementById(e):s=e,!(s instanceof HTMLCanvasElement))throw new Error("Please input the valid canvas element or id.");if(!(t instanceof a.Mat))throw new Error("Please input the valid cv.Mat instance.");switch(n=new a.Mat,o=t.type()%8,c=o<=a.CV_8S?1:o<=a.CV_32S?1/256:255,l=o===a.CV_8S||o===a.CV_16S?128:0,t.convertTo(n,a.CV_8U,c,l),n.type()){case a.CV_8UC1:a.cvtColor(n,n,a.COLOR_GRAY2RGBA);break;case a.CV_8UC3:a.cvtColor(n,n,a.COLOR_RGB2RGBA);break;case a.CV_8UC4:break;default:throw new Error("Bad number of channels (Source image must have 1, 3 or 4 channels)")}i=new ImageData(new Uint8ClampedArray(n.data),n.cols,n.rows),r=s.getContext("2d"),r.clearRect(0,0,s.width,s.height),s.width=i.width,s.height=i.height,r.putImageData(i,0,0),n.delete()},s.VideoCapture=function(e){var n,s,t=null;if(typeof e=="string"?t=document.getElementById(e):t=e,!(t instanceof HTMLVideoElement))throw new Error("Please input the valid video element or id.");n=document.createElement("canvas"),n.width=t.width,n.height=t.height,s=n.getContext("2d"),this.video=t,this.read=function(e){if(!(e instanceof a.Mat))throw new Error("Please input the valid cv.Mat instance.");if(e.type()!==a.CV_8UC4)throw new Error("Bad type of input mat: the type should be cv.CV_8UC4.");if(e.cols!==t.width||e.rows!==t.height)throw new Error("Bad size of input mat: the size should be same as the video.");s.drawImage(t,0,0,t.width,t.height),e.data.set(s.getImageData(0,0,t.width,t.height).data)}};function Yo(e,t){this.start=typeof e=="undefined"?0:e,this.end=typeof t=="undefined"?0:t}s.Range=Yo;function ze(e,t){this.x=typeof e=="undefined"?0:e,this.y=typeof t=="undefined"?0:t}s.Point=ze;function Xo(e,t){this.width=typeof e=="undefined"?0:e,this.height=typeof t=="undefined"?0:t}s.Size=Xo;function Qo(){switch(arguments.length){case 0:{this.x=0,this.y=0,this.width=0,this.height=0;break}case 1:{var t,n,e=arguments[0];this.x=e.x,this.y=e.y,this.width=e.width,this.height=e.height;break}case 2:{t=arguments[0],n=arguments[1],this.x=t.x,this.y=t.y,this.width=n.width,this.height=n.height;break}case 4:{this.x=arguments[0],this.y=arguments[1],this.width=arguments[2],this.height=arguments[3];break}default:throw new Error("Invalid arguments")}}s.Rect=Qo;function Ye(){switch(arguments.length){case 0:{this.center={x:0,y:0},this.size={width:0,height:0},this.angle=0;break}case 3:{this.center=arguments[0],this.size=arguments[1],this.angle=arguments[2];break}default:throw new Error("Invalid arguments")}}Ye.points=function(e){return s.rotatedRectPoints(e)},Ye.boundingRect=function(e){return s.rotatedRectBoundingRect(e)},Ye.boundingRect2f=function(e){return s.rotatedRectBoundingRect2f(e)},s.RotatedRect=Ye;function $e(e,t,n,s){this.push(typeof e=="undefined"?0:e),this.push(typeof t=="undefined"?0:t),this.push(typeof n=="undefined"?0:n),this.push(typeof s=="undefined"?0:s)}$e.prototype=new Array,$e.all=function(e){return $e(e,e,e,e)},s.Scalar=$e;function ei(){switch(arguments.length){case 0:{this.minVal=0,this.maxVal=0,this.minLoc=ze(0,0),this.maxLoc=ze(0,0);break}case 4:{this.minVal=arguments[0],this.maxVal=arguments[1],this.minLoc=arguments[2],this.maxLoc=arguments[3];break}default:throw new Error("Invalid arguments")}}s.MinMaxLoc=ei;function ti(){switch(arguments.length){case 0:{this.center=ze(0,0),this.radius=0;break}case 2:{this.center=arguments[0],this.radius=arguments[1];break}default:throw new Error("Invalid arguments")}}s.Circle=ti;function ni(){switch(arguments.length){case 0:{this.type=0,this.maxCount=0,this.epsilon=0;break}case 3:{this.type=arguments[0],this.maxCount=arguments[1],this.epsilon=arguments[2];break}default:throw new Error("Invalid arguments")}}return s.TermCriteria=ni,s.matFromArray=function(e,t,n,s){var o=new a.Mat(e,t,n);switch(n){case a.CV_8U:case a.CV_8UC1:case a.CV_8UC2:case a.CV_8UC3:case a.CV_8UC4:{o.data.set(s);break}case a.CV_8S:case a.CV_8SC1:case a.CV_8SC2:case a.CV_8SC3:case a.CV_8SC4:{o.data8S.set(s);break}case a.CV_16U:case a.CV_16UC1:case a.CV_16UC2:case a.CV_16UC3:case a.CV_16UC4:{o.data16U.set(s);break}case a.CV_16S:case a.CV_16SC1:case a.CV_16SC2:case a.CV_16SC3:case a.CV_16SC4:{o.data16S.set(s);break}case a.CV_32S:case a.CV_32SC1:case a.CV_32SC2:case a.CV_32SC3:case a.CV_32SC4:{o.data32S.set(s);break}case a.CV_32F:case a.CV_32FC1:case a.CV_32FC2:case a.CV_32FC3:case a.CV_32FC4:{o.data32F.set(s);break}case a.CV_64F:case a.CV_64FC1:case a.CV_64FC2:case a.CV_64FC3:case a.CV_64FC4:{o.data64F.set(s);break}default:throw new Error("Type is unsupported")}return o},s.matFromImageData=function(e){var t=new a.Mat(e.height,e.width,a.CV_8UC4);return t.data.set(e.data),t},typeof Symbol!="undefined"&&Symbol.dispose&&typeof a!="undefined"&&a.Mat&&typeof a.Mat.prototype.delete=="function"&&(a.Mat.prototype[Symbol.dispose]=a.Mat.prototype.delete,a.UMat&&(a.UMat.prototype[Symbol.dispose]=a.UMat.prototype.delete)),Yt=s.onRuntimeInitialized,s.onRuntimeInitialized=function(){Yt&&Yt(),typeof a!="undefined"&&a.Mat&&typeof a.Mat.prototype.mat_clone=="function"&&(a.Mat.prototype.clone=a.Mat.prototype.mat_clone)},st?Lt=s:Lt=new Promise((e,t)=>{kt=e,on=t}),Lt}})();typeof exports=="object"&&typeof module=="object"?(module.exports=cv,module.exports.default=cv):typeof define=="function"&&define.amd&&define([],()=>cv),isPthread=globalThis.self?.name?.startsWith("em-pthread"),isNode=globalThis.process?.versions?.node&&globalThis.process?.type!="renderer",isNode&&(isPthread=require("worker_threads").workerData==="em-pthread"),isPthread&&cv()